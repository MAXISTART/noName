webpackJsonp([1],{1003:function(e,t){},1004:function(e,t){},1005:function(e,t){},1006:function(e,t){},1007:function(e,t){},1008:function(e,t){},1009:function(e,t){},1010:function(e,t){},1011:function(e,t){},1012:function(e,t){},1013:function(e,t){},1014:function(e,t){},1015:function(e,t){},1016:function(e,t){},1017:function(e,t){},1018:function(e,t){},1028:function(e,t,r){var n=r(25)(r(457),r(1056),null,null);e.exports=n.exports},1029:function(e,t,r){r(1017);var n=r(25)(null,r(1060),"data-v-f3c06f9e",null);e.exports=n.exports},1030:function(e,t,r){r(1013);var n=r(25)(r(459),r(1055),"data-v-77783054",null);e.exports=n.exports},1031:function(e,t,r){r(1006);var n=r(25)(r(460),r(1048),"data-v-3bc40cfc",null);e.exports=n.exports},1032:function(e,t,r){r(1015);var n=r(25)(r(461),r(1058),"data-v-a9dd8160",null);e.exports=n.exports},1033:function(e,t,r){r(1007);var n=r(25)(r(462),r(1049),"data-v-4655e064",null);e.exports=n.exports},1034:function(e,t,r){r(1011);var n=r(25)(r(463),r(1053),"data-v-717be4ac",null);e.exports=n.exports},1035:function(e,t,r){r(1008);var n=r(25)(r(464),r(1050),"data-v-53c9ee3b",null);e.exports=n.exports},1036:function(e,t,r){r(1016);var n=r(25)(r(465),r(1059),"data-v-c7edc2c4",null);e.exports=n.exports},1037:function(e,t,r){r(1018);var n=r(25)(r(466),r(1061),"data-v-f8d1976c",null);e.exports=n.exports},1038:function(e,t,r){r(1004);var n=r(25)(r(467),r(1045),"data-v-2b63e0a9",null);e.exports=n.exports},1039:function(e,t,r){r(1010);var n=r(25)(r(468),r(1052),"data-v-6feb2225",null);e.exports=n.exports},1040:function(e,t,r){r(1012);var n=r(25)(r(469),r(1054),null,null);e.exports=n.exports},1041:function(e,t,r){r(1009);var n=r(25)(r(470),r(1051),"data-v-64ba4b2a",null);e.exports=n.exports},1042:function(e,t,r){r(1014);var n=r(25)(r(471),r(1057),null,null);e.exports=n.exports},1043:function(e,t,r){r(1003);var n=r(25)(r(472),r(1044),null,null);e.exports=n.exports},1044:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-col",{staticClass:"toolbar",attrs:{span:24}},[r("el-button",{attrs:{type:"primary",size:"midium"},on:{click:e.handleFilterAdd}},[e._v("按条件查询")]),e._v(" "),r("el-button",{attrs:{type:"primary",size:"midium"},on:{click:e.handleAdd}},[e._v("新增")]),e._v(" "),r("el-button",{attrs:{type:"primary",size:"midium",disabled:0===this.sels.length},on:{click:e.quickOutput}},[e._v("快速出库")])],1),e._v(" "),r("el-dialog",{attrs:{title:"添加查询条件",visible:e.filterVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.filterVisible=t},close:e.onFilterClose}},[r("el-form",{ref:"addForm",attrs:{model:e.filters,"label-width":"150px",rules:e.filterRules}},[r("el-form-item",{attrs:{label:"所属部门",prop:"departmentId"}},[r("el-select",{attrs:{placeholder:"请选择"},on:{change:e.selectFilterDepartment},model:{value:e.filters.departmentId,callback:function(t){e.$set(e.filters,"departmentId",t)},expression:"filters.departmentId"}},e._l(e.allDepartments,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"负责人",prop:"requestorId"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.filters.requestorId,callback:function(t){e.$set(e.filters,"requestorId",t)},expression:"filters.requestorId"}},e._l(e.filterRequestors,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"申请时间"}},[r("el-col",{attrs:{span:11}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{editable:!1,"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime","picker-options":e.timeOptions},model:{value:e.filters.requestTime_start,callback:function(t){e.$set(e.filters,"requestTime_start",t)},expression:"filters.requestTime_start"}})],1),e._v(" "),r("el-col",{staticClass:"line",attrs:{span:2}},[e._v("——")]),e._v(" "),r("el-col",{attrs:{span:11}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{editable:!1,"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime","picker-options":e.timeOptions},model:{value:e.filters.requestTime_end,callback:function(t){e.$set(e.filters,"requestTime_end",t)},expression:"filters.requestTime_end"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"申请总价"}},[r("el-col",{attrs:{span:11}},[r("el-input",{attrs:{placeholder:"请输入价格范围"},model:{value:e.filters.price_start,callback:function(t){e.$set(e.filters,"price_start",e._n(t))},expression:"filters.price_start"}})],1),e._v(" "),r("el-col",{staticClass:"line",attrs:{span:2}},[e._v("——")]),e._v(" "),r("el-col",{attrs:{span:11}},[r("el-input",{attrs:{placeholder:"请输入价格范围"},model:{value:e.filters.price_end,callback:function(t){e.$set(e.filters,"price_end",e._n(t))},expression:"filters.price_end"}})],1)],1),e._v(" "),r("el-row",[r("el-form-item",{attrs:{align:"right"}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.refreshData()}}},[e._v("刷新数据")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleResetFilter()}}},[e._v("重置")])],1)],1)],1)],1),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"takeOrders",staticStyle:{width:"100%"},attrs:{data:e.takeOrders,"span-method":e.arraySpanMethod},on:{"selection-change":e.selsChange,"sort-change":e.sortAll}},[r("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),r("el-table-column",{attrs:{type:"index",width:"60",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{label:"申领单明细",align:"center",width:"800"}},[r("el-table-column",{attrs:{label:"名称",prop:"takeOrderItems_name","min-width":"120",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{label:"种类",prop:"takeOrderItems_sort","min-width":"120",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{label:"规格",prop:"takeOrderItems_spec","min-width":"120",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{label:"单位",prop:"takeOrderItems_unit","min-width":"120",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{label:"数量",prop:"takeOrderItems_number","min-width":"120",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{label:"归还数量",prop:"takeOrderItems_returnNumber","min-width":"120",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{label:"实际单价",prop:"takeOrderItems_price","min-width":"120",align:"center"}})],1),e._v(" "),r("el-table-column",{attrs:{label:"申领单信息",align:"center",width:"1060"}},[r("el-table-column",{attrs:{label:"审核进度",prop:"approvalResult",filters:[{text:"已通过",value:"1"},{text:"审核中",value:2},{text:"已驳回",value:0}],"filter-method":e.filterTag,"min-width":"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-popover",{attrs:{trigger:"hover",placement:"top",disabled:e.showPopover(t.row.approvalResult)}},[r("el-button",{attrs:{type:"primary",round:"",size:"small"},on:{click:function(r){e.approve(t.row.id,1)}}},[e._v("批准通过")]),e._v(" "),r("el-button",{attrs:{type:"danger",round:"",size:"small"},on:{click:function(r){e.approve(t.row.id,0)}}},[e._v("不通过")]),e._v(" "),r("div",{attrs:{slot:"reference"},slot:"reference"},[r("el-tag",{attrs:{type:e.tagChange(t)}},[e._v(e._s(t.row.tag))])],1)],1)]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"是否已经出库",prop:"hasBeenOutput",formatter:e.formatOutputFlag,"min-width":"140",sortable:"custom",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{label:"申请部门",prop:"departmentName","min-width":"140",sortable:"custom",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{label:"申请人",prop:"requestorName","min-width":"140",sortable:"custom",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{label:"申请时间",prop:"requestTime","min-width":"200",sortable:"custom",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{label:"申请总价",prop:"requestTotalPrice","min-width":"140",sortable:"custom",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{label:"申请原因",prop:"description","min-width":"200",sortable:"custom",align:"center"}})],1),e._v(" "),r("el-table-column",{attrs:{label:"系统属性",width:"320",align:"center"}},[r("el-table-column",{attrs:{prop:"creatorName",label:"创建者",width:"120",sortable:"custom",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{type:"date",prop:"createTime",label:"创建时间","min-width":"180",sortable:"custom",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"updatorName",label:"最后更新人","min-width":"180",sortable:"custom",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{type:"date",prop:"lastmodifiedTime",label:"最后更新时间","min-width":"180",sortable:"custom",align:"center"}})],1),e._v(" "),r("el-table-column",{attrs:{label:"操作",width:"150",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"small",disabled:e.checkInApproval(t.row.approvalResult)},on:{click:function(r){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),r("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(r){e.handleDel(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),r("el-col",{staticClass:"toolbar",attrs:{span:24}},[r("el-button",{attrs:{type:"danger",disabled:0===this.sels.length},on:{click:e.batchRemove}},[e._v("批量删除")]),e._v(" "),r("el-popover",{ref:"batchApprovalPopover",attrs:{trigger:"click",placement:"top-start"}},[r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.batchApprove(1)}}},[e._v("批准通过")]),e._v(" "),r("el-button",{staticStyle:{float:"right"},attrs:{type:"danger",size:"mini"},on:{click:function(t){e.batchApprove(0)}}},[e._v("驳回")])],1),e._v(" "),r("el-button",{directives:[{name:"popover",rawName:"v-popover:batchApprovalPopover",arg:"batchApprovalPopover"}],attrs:{type:"primary",disabled:0===this.sels.length}},[e._v("批量审核")]),e._v(" "),r("el-pagination",{staticClass:"pagination",attrs:{"current-page":e.pagination.currentPage,"page-sizes":e.pagination.pageSizes,"page-size":e.pagination.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pagination.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),r("el-dialog",{attrs:{fullscreen:"",title:"编辑",visible:e.editFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.editFormVisible=t},close:function(t){e.clearValidate("editForm")}}},[r("el-form",{ref:"editForm",attrs:{model:e.editObj,"label-width":"80px",rules:e.editFormRules}},[r("el-form-item",{attrs:{label:"所属部门",prop:"departmentId"}},[r("el-select",{attrs:{placeholder:"请选择"},on:{change:e.selectEditDepartment},model:{value:e.editObj.departmentId,callback:function(t){e.$set(e.editObj,"departmentId",t)},expression:"editObj.departmentId"}},e._l(e.allDepartments,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"负责人",prop:"requestorId"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.editObj.requestorId,callback:function(t){e.$set(e.editObj,"requestorId",t)},expression:"editObj.requestorId"}},e._l(e.editRequestors,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"申请时间",prop:"requestTime"}},[r("el-date-picker",{attrs:{editable:!1,"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",align:"right","picker-options":e.timeOptions},model:{value:e.editObj.requestTime,callback:function(t){e.$set(e.editObj,"requestTime",t)},expression:"editObj.requestTime"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"物品明细",prop:"takeOrderItems"}},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.editObj.takeOrderItems,"show-summary":"","summary-method":e.getSummaries,border:"",height:"350px","max-height":"999999px","highlight-current-row":""},on:{"selection-change":e.selsChange}},[r("el-table-column",{attrs:{label:"名称",prop:"name",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-autocomplete",{attrs:{"fetch-suggestions":e.querySearchAsync,placeholder:"请输入名称"},on:{select:function(r){e.handleSelect(t.row,r)}},model:{value:t.row.name,callback:function(r){e.$set(t.row,"name",r)},expression:"scope.row.name"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"数量",prop:"number",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{attrs:{placeholder:"请输入数量"},model:{value:t.row.number,callback:function(r){e.$set(t.row,"number",r)},expression:"scope.row.number"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"归还数量",prop:"returnNumber",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{attrs:{placeholder:"请输入归还数量"},model:{value:t.row.returnNumber,callback:function(r){e.$set(t.row,"returnNumber",r)},expression:"scope.row.returnNumber"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"规格",prop:"spec",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{attrs:{placeholder:"请先输入名称"},model:{value:t.row.spec,callback:function(r){e.$set(t.row,"spec",r)},expression:"scope.row.spec"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"单价",prop:"price",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{attrs:{placeholder:"请先输入名称"},model:{value:t.row.price,callback:function(r){e.$set(t.row,"price",r)},expression:"scope.row.price"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"单位",prop:"unit",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{attrs:{placeholder:"请先输入名称"},model:{value:t.row.unit,callback:function(r){e.$set(t.row,"unit",r)},expression:"scope.row.unit"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"50",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-minus"},on:{click:function(r){e.handleRemoveTakeOrderItem(t.$index,e.editObj.takeOrderItems)}}})]}}])})],1),e._v(" "),r("el-form-item",{staticStyle:{"margin-top":"10px"}},[r("el-button",{attrs:{type:"primary",size:"medium",icon:"el-icon-plus"},on:{click:function(t){e.handleAddTakeOrderItem(e.editObj.takeOrderItems)}}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"申请描述",prop:"description"}},[r("el-input",{attrs:{type:"textarea",rows:4,autosize:""},model:{value:e.editObj.description,callback:function(t){e.$set(e.editObj,"description",t)},expression:"editObj.description"}})],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary",loading:e.editLoading},on:{click:function(t){e.handleEditFormSubmit("editForm")}}},[e._v("提交")])],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"新增",fullscreen:"",visible:e.addFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.addFormVisible=t},close:function(t){e.clearValidate("addForm")}}},[r("el-form",{ref:"addForm",attrs:{model:e.addObj,"label-width":"80px",rules:e.addFormRules}},[r("el-form-item",{attrs:{label:"所属部门",prop:"departmentId"}},[r("el-select",{attrs:{placeholder:"请选择"},on:{change:e.selectAddDepartment},model:{value:e.addObj.departmentId,callback:function(t){e.$set(e.addObj,"departmentId",t)},expression:"addObj.departmentId"}},e._l(e.allDepartments,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"负责人",prop:"requestorId"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addObj.requestorId,callback:function(t){e.$set(e.addObj,"requestorId",t)},expression:"addObj.requestorId"}},e._l(e.addRequestors,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"申请时间",prop:"requestTime"}},[r("el-date-picker",{attrs:{editable:!1,"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",align:"right","picker-options":e.timeOptions},model:{value:e.addObj.requestTime,callback:function(t){e.$set(e.addObj,"requestTime",t)},expression:"addObj.requestTime"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"物品明细",prop:"takeOrderItems"}},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.addObj.takeOrderItems,"show-summary":"","summary-method":e.getSummaries,border:"",height:"350px","max-height":"999999px","highlight-current-row":""},on:{"selection-change":e.selsChange}},[r("el-table-column",{attrs:{label:"名称",prop:"name",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-autocomplete",{attrs:{"fetch-suggestions":e.querySearchAsync,placeholder:"请输入名称"},on:{select:function(r){e.handleSelect(t.row,r)}},model:{value:t.row.name,callback:function(r){e.$set(t.row,"name",r)},expression:"scope.row.name"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"数量",prop:"number",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{attrs:{placeholder:"请输入数量"},model:{value:t.row.number,callback:function(r){e.$set(t.row,"number",r)},expression:"scope.row.number"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"归还数量",prop:"returnNumber",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{attrs:{placeholder:"请输入归还数量"},model:{value:t.row.returnNumber,callback:function(r){e.$set(t.row,"returnNumber",r)},expression:"scope.row.returnNumber"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"规格",prop:"spec",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{attrs:{placeholder:"请先输入名称"},model:{value:t.row.spec,callback:function(r){e.$set(t.row,"spec",r)},expression:"scope.row.spec"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"单价",prop:"price",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{attrs:{placeholder:"请先输入名称"},model:{value:t.row.price,callback:function(r){e.$set(t.row,"price",r)},expression:"scope.row.price"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"单位",prop:"unit",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{attrs:{placeholder:"请先输入名称"},model:{value:t.row.unit,callback:function(r){e.$set(t.row,"unit",r)},expression:"scope.row.unit"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"50",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-minus"},on:{click:function(r){e.handleRemoveTakeOrderItem(t.$index,e.addObj.takeOrderItems)}}})]}}])})],1),e._v(" "),r("el-form-item",{staticStyle:{"margin-top":"10px"}},[r("el-button",{attrs:{type:"primary",size:"medium",icon:"el-icon-plus"},on:{click:function(t){e.handleAddTakeOrderItem(e.addObj.takeOrderItems)}}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"申请描述",prop:"description"}},[r("el-input",{attrs:{type:"textarea",rows:4,autosize:""},model:{value:e.addObj.description,callback:function(t){e.$set(e.addObj,"description",t)},expression:"addObj.description"}})],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary",loading:e.addLoading},on:{click:function(t){e.handleAddFormSubmit("addForm")}}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]}},1045:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[r("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[r("el-form",{attrs:{inline:!0}},[r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("新增")])],1)],1)],1),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.permissions,border:"","highlight-current-row":""},on:{"selection-change":e.selsChange}},[r("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),r("el-table-column",{attrs:{type:"index",width:"60",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{label:"权限信息",width:"440",align:"center"}},[r("el-table-column",{attrs:{prop:"name",label:"名称",width:"140","column-key":"id",sortable:"",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"description",label:"权限描述",width:"300",sortable:"",align:"center"}})],1),e._v(" "),r("el-table-column",{attrs:{label:"系统属性",width:"320",align:"center"}},[r("el-table-column",{attrs:{prop:"creatorName",label:"创建者",width:"120",sortable:"",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{type:"date",prop:"createTime",label:"创建时间","min-width":"180",sortable:"",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"updatorName",label:"最后更新人","min-width":"180",sortable:"",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{type:"date",prop:"lastmodifiedTime",label:"最后更新时间","min-width":"180",sortable:"",align:"center"}})],1),e._v(" "),r("el-table-column",{attrs:{label:"操作",width:"150",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"small"},on:{click:function(r){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),r("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(r){e.handleDel(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),r("el-col",{staticClass:"toolbar",attrs:{span:24}},[r("el-button",{attrs:{type:"danger",disabled:0===this.sels.length},on:{click:e.batchRemove}},[e._v("批量删除")]),e._v(" "),r("el-pagination",{staticClass:"pagenation",attrs:{"current-page":e.pagination.currentPage,"page-sizes":e.pagination.pageSizes,"page-size":e.pagination.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pagination.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),r("el-dialog",{attrs:{title:"编辑",visible:e.editFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.editFormVisible=t}}},[r("el-form",{ref:"editForm",attrs:{model:e.editForm,"label-width":"120px",rules:e.editFormRules}},[r("el-form-item",{attrs:{label:"权限名称",prop:"name"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"权限描述"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.editForm.description,callback:function(t){e.$set(e.editForm,"description",t)},expression:"editForm.description"}})],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{nativeOn:{click:function(t){e.editFormVisible=!1}}},[e._v("取消")]),e._v(" "),r("el-button",{attrs:{type:"primary",loading:e.editLoading},nativeOn:{click:function(t){e.editSubmit(t)}}},[e._v("提交")])],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"新增",visible:e.addFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.addFormVisible=t}}},[r("el-form",{ref:"addForm",attrs:{model:e.addForm,"label-width":"120px",rules:e.editFormRules}},[r("el-form-item",{attrs:{label:"权限名称",prop:"name"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"权限描述"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.addForm.description,callback:function(t){e.$set(e.addForm,"description",t)},expression:"addForm.description"}})],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{nativeOn:{click:function(t){e.addFormVisible=!1}}},[e._v("取消")]),e._v(" "),r("el-button",{attrs:{type:"primary",loading:e.addLoading},nativeOn:{click:function(t){e.addSubmit(t)}}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]}},1046:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("transition",{attrs:{name:"fade",mode:"out-in"}},[r("router-view")],1)],1)},staticRenderFns:[]}},1047:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-form",{ref:e.name,attrs:{rules:e.rules,model:e.data,"label-width":"labelWidth"}},[e._l(e.items,function(t,n){return r("item",{attrs:{"rule-form":e.data,prop:n,options:t}})}),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm(e.name)}}},[e._v("提交")]),e._v(" "),r("el-button",{on:{click:e.cancel}},[e._v("取消")])],1)],2)},staticRenderFns:[]}},1048:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-form",{ref:"ruleForm2",staticClass:"demo-ruleForm login-container",attrs:{model:e.ruleForm2,rules:e.rules2,"label-position":"left","label-width":"0px"}},[r("h3",{staticClass:"title"},[e._v("系统登录")]),e._v(" "),r("el-form-item",{attrs:{prop:"account"}},[r("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"账号"},model:{value:e.ruleForm2.account,callback:function(t){e.$set(e.ruleForm2,"account",t)},expression:"ruleForm2.account"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"checkPass"}},[r("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"密码"},model:{value:e.ruleForm2.checkPass,callback:function(t){e.$set(e.ruleForm2,"checkPass",t)},expression:"ruleForm2.checkPass"}})],1),e._v(" "),r("el-checkbox",{staticClass:"remember",attrs:{checked:""},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("记住密码")]),e._v(" "),r("el-form-item",{staticStyle:{width:"100%"}},[r("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",loading:e.logining},nativeOn:{click:function(t){t.preventDefault(),e.handleSubmit2(t)}}},[e._v("登录")])],1)],1)},staticRenderFns:[]}},1049:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},staticRenderFns:[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[r("div",{staticClass:"content"},[r("h3",[e._v("总体功能")]),e._v(" "),r("ul",[r("li",[r("strong",[e._v("采购：")]),e._v("\n\t\t\t\t先申请采购，然后审批通过后入库。\n\t\t\t")]),e._v(" "),r("li",[r("strong",[e._v("申领：")]),e._v("\n\t\t\t\t先申请申领，然后审批通过后出库。\n\t\t\t")]),e._v(" "),r("li",[r("strong",[e._v("审批功能：")]),e._v("\n\t\t\t\t待完善（将结合钉钉）\n\t\t\t")])]),e._v(" "),r("h3",[e._v("表单说明")]),e._v(" "),r("ul",[r("li",[r("strong",[e._v("基础信息表：")]),e._v(" "),r("div",{staticStyle:{"margin-left":"60px","margin-top":"10px","line-height":"30px"}},[e._v("\n\t\t\t\t里面的表是最基础的表，先填写该表，其中的权限表默认有两个权限了，可以不理。\n\t\t\t\t")])]),e._v(" "),r("li",[r("strong",[e._v("库存相关：")]),e._v(" "),r("div",{staticStyle:{"margin-left":"60px","margin-top":"10px","line-height":"30px"}},[e._v("\n\t\t\t\t\t采购表 和 申领表 的数据都是要经过管理员 审批 的（当前你就是管理员），而且审批后还得进行 出库 或者 入库。\n\t\t\t\t\t"),r("br"),e._v("\n\t\t\t\t\t库存表 是不能直接操作的，它相当于一个统计表，统计当前各种物品的库存。\n\t\t\t\t\t"),r("br"),e._v("\n\t\t\t\t\t库存操作表 是用来直接操作 库存 的，同时也是用来记录对 库存 的操作，并且是需要 审批 的，比如你现在要销毁掉10个办公用品，可以申请 类型 为 出库 的库存操作，\n\t\t\t\t\t管理员 审批 通过后并且执行 出库，系统会自动帮你操作库存。\n\t\t\t\t\t"),r("br"),e._v("\n\t\t\t\t\t当前你就是管理员\n\t\t\t\t")])]),e._v(" "),r("li",[r("strong",[e._v("统计：")]),e._v(" "),r("div",{staticStyle:{"margin-left":"60px","margin-top":"10px","line-height":"30px"}},[e._v("\n\t\t\t\t图像显示一些统计信息，其中的 库存统计 中有两个指标，一个是 库存，一个是 库存总价，可以选择只看一个指标(单击即可)\n\t\t\t\t")])])]),e._v(" "),r("h3",[e._v("使用说明")]),e._v(" "),r("ul",[r("li",[r("strong",[e._v("初次使用：")]),e._v(" "),r("div",{staticStyle:{"margin-left":"60px","margin-top":"10px","line-height":"30px"}},[e._v("\n\t\t\t\t\t先填写 部门表，部门表的负责人可以先不用填（因为此时人员还未录入）\n\t\t\t\t\t"),r("br"),e._v("\n\t\t\t\t\t接着是填人员表，默认系统有个人员，那就是admin，是超级管理员，无需注册的。人员填写的时候需要指定他们的部门\n\t\t\t\t\t"),r("br"),e._v("\n\t\t\t\t\t人员填好后可以回到部门表里面更新部门信息，指定部门负责人（这个在之后的审批功能中会比较重要，）\n\t\t\t\t\t"),r("br"),e._v("\n\t\t\t\t\t还可以对人员添加或者删除权限，当前系统默认有两个权限，非必要时请不要删除这两个权限，一个是user，一个是admin，分别是用户权限和管理员权限\n\t\t\t\t\t"),r("br"),e._v("\n\t\t\t\t\t可以根据权限来分配哪些人当管理员，管理员才能登陆该系统。（管理员也可以拥有用户权限，不冲突）\n\t\t\t\t")])]),e._v(" "),r("li",[r("strong",[e._v("采购：")]),e._v(" "),r("div",{staticStyle:{"margin-left":"60px","margin-top":"10px","line-height":"30px"}},[e._v("\n\t\t\t\t\t在填写采购表先确认 用品表 中是否存在要 采购的物品 的信息，如果不存在，就先去 用品表 中填写。\n\t\t\t\t\t"),r("strong",[e._v("要使用 用品表 就必须先 添加物品种类（在 用品表 中添加）。")]),e._v(" "),r("br"),e._v("\n\t\t\t\t\t比如现在要采购一条规格为3cm的网线，用品表中已经存在该用品，那么就 新建 采购单， 然后填写时要注意，物品明细那里先填写物品名称，比如填一个\"网字\"，系统就会帮你匹配出'网线(3cm)'的选项，帮你自动填充其余空格（数据从用品表中来）。\n\t\t\t\t\t"),r("br"),e._v("\n\t\t\t\t\t上面的物品明细的数据虽然是来自物品表，但是因为各种原因（比如临时降价），所以当前价格可能和之前物品输入的价格不符，可以修改物品表价格，也可以直接在此处修改价格。\n\t\t\t\t\t"),r("br"),e._v("\n\t\t\t\t\t无论是管理员还是用户，提交的采购表默认都是未审核的，所以需要管理员自己审核这些采购单，无论审核结果如何，一旦审核过就不能再编辑这个采购单，审核通过后也是不会自动入库的，需要管理员进行 快速入库 的操作。\n\t\t\t\t")])]),e._v(" "),r("li",[r("strong",[e._v("申领：")]),e._v(" "),r("div",{staticStyle:{"margin-left":"60px","margin-top":"10px","line-height":"30px"}},[e._v("\n\t\t\t\t和采购表是类似的，不过 申领表 有个 归还数量，之后有归还功能后会开启这个属性的作用\n\t\t\t\t")])]),e._v(" "),r("li",[r("strong",[e._v("库存操作：")]),e._v(" "),r("div",{staticStyle:{"margin-left":"60px","margin-top":"10px","line-height":"30px"}},[e._v("\n\t\t\t\t\t管理员新建库存操作单的时候默认都是审核通过的，无需审核，而用户的需要审核。\n\t\t\t\t")])])])])])}]}},1050:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[r("div",{staticClass:"content"},[r("h3",[e._v("请上传简道云的文件，尽量不要重复")]),e._v(" "),r("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"","with-credentials":"",multiple:"","on-preview":e.handlePreview,"on-remove":e.handleRemove,"file-list":e.fileList,"on-error":e.onError,"before-upload":e.beforeUpload,"http-request":e.upload,"auto-upload":!1}},[r("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),e._v(" "),r("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:e.submitUpload}},[e._v("解析文件")])],1)],1)])},staticRenderFns:[]}},1051:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[r("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[r("el-form",{ref:"filters",attrs:{inline:!0,model:e.filters}},[r("el-form-item",[r("el-input",{attrs:{placeholder:"名称"},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,"name",t)},expression:"filters.name"}})],1),e._v(" "),r("el-form-item",[r("el-input",{attrs:{placeholder:"请输入最小单价"},model:{value:e.filters.price_start,callback:function(t){e.$set(e.filters,"price_start",e._n(t))},expression:"filters.price_start"}})],1),e._v(" "),r("el-form-item",[r("el-input",{attrs:{placeholder:"请输入最大单价"},model:{value:e.filters.price_end,callback:function(t){e.$set(e.filters,"price_end",e._n(t))},expression:"filters.price_end"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.getStoreItems}},[e._v("查询")])],1)],1)],1),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.storeItems,border:"","highlight-current-row":""},on:{"selection-change":e.selsChange}},[r("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),r("el-table-column",{attrs:{type:"index",width:"60",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{label:"库存信息",width:"720",align:"center"}},[r("el-table-column",{attrs:{prop:"goodItem_name",label:"名称",width:"140","column-key":"id",sortable:"",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"goodItem_spec",label:"规格",width:"120",sortable:"",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"lockNumber",label:"当前被请求申领的数量","min-width":"120",sortable:"",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"number",label:"当前库存数量","min-width":"120",sortable:"",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"goodItem_price",label:"单价","min-width":"120",sortable:"",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"totalPrice",label:"入库总价","min-width":"120",sortable:"",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"inputTime",label:"入库时间","min-width":"120",sortable:"",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"goodItem_sort",label:"种类",width:"120",sortable:"",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"goodItem_unit",label:"单位",width:"100",sortable:"",align:"center"}})],1),e._v(" "),r("el-table-column",{attrs:{label:"系统属性",width:"320",align:"center"}},[r("el-table-column",{attrs:{prop:"creatorName",label:"创建者",width:"120",sortable:"",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{type:"date",prop:"createTime",label:"创建时间","min-width":"180",sortable:"",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"updatorName",label:"最后更新人","min-width":"180",sortable:"",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{type:"date",prop:"lastmodifiedTime",label:"最后更新时间","min-width":"180",sortable:"",align:"center"}})],1)],1),e._v(" "),r("el-col",{staticClass:"toolbar",attrs:{span:24}},[r("el-pagination",{staticClass:"pagenation",attrs:{"current-page":e.pagination.currentPage,"page-sizes":e.pagination.pageSizes,"page-size":e.pagination.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pagination.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]}},1052:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[r("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[r("el-form",{ref:"filters",attrs:{inline:!0,model:e.filters}},[r("el-form-item",[r("el-input",{attrs:{placeholder:"名称"},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,"name",t)},expression:"filters.name"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.getUsers}},[e._v("查询")])],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("新增")])],1)],1)],1),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.users,border:"","highlight-current-row":""},on:{"selection-change":e.selsChange}},[r("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),r("el-table-column",{attrs:{type:"index",width:"60",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{label:"个人信息",width:"1060",align:"center"}},[r("el-table-column",{attrs:{prop:"name",label:"名称",width:"140","column-key":"id",sortable:"",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"departmentName",label:"部门名称",width:"140",sortable:"",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"description",label:"个人描述","min-width":"200",sortable:"",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"phoneNumber",label:"联系方式","min-width":"180",sortable:"",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"mailbox",label:"邮箱","min-width":"180",sortable:"",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"qqNumber",label:"QQ","min-width":"180",sortable:"",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"weixin",label:"微信","min-width":"180",sortable:"",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{label:"用户权限","min-width":"280",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-row",{attrs:{gutter:85}},e._l(t.row.permissions,function(n,i){return r("el-col",{attrs:{span:6}},[r("el-popover",{attrs:{trigger:"hover",placement:"top"}},[r("p",[e._v("名称: "+e._s(n.name))]),e._v(" "),r("p",[e._v("描述: "+e._s(n.description))]),e._v(" "),r("div",{attrs:{slot:"reference"},slot:"reference"},[r("el-tag",{staticClass:"infoTag",attrs:{type:"info",size:"medium",closable:"","disable-transitions":!1},on:{close:function(r){e.handleClose(t.row.id,n)}}},[e._v("\n\t\t\t\t\t\t\t\t\t"+e._s(n.name)+"\n\t\t\t\t\t\t\t\t")])],1)])],1)}))]}}])})],1),e._v(" "),r("el-table-column",{attrs:{label:"系统属性",width:"320",align:"center"}},[r("el-table-column",{attrs:{prop:"creatorName",label:"创建者",width:"120",sortable:"",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{type:"date",prop:"createTime",label:"创建时间","min-width":"180",sortable:"",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"updatorName",label:"最后更新人","min-width":"180",sortable:"",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{type:"date",prop:"lastmodifiedTime",label:"最后更新时间","min-width":"180",sortable:"",align:"center"}})],1),e._v(" "),r("el-table-column",{attrs:{label:"操作",width:"250",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(r){e.handleAddPermiss(t.$index,t.row)}}},[e._v("添加权限")]),e._v(" "),r("el-button",{attrs:{size:"small"},on:{click:function(r){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),r("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(r){e.handleDel(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),r("el-col",{staticClass:"toolbar",attrs:{span:24}},[r("el-button",{attrs:{type:"danger",disabled:0===this.sels.length},on:{click:e.batchRemove}},[e._v("批量删除")]),e._v(" "),r("el-pagination",{staticClass:"pagenation",attrs:{"current-page":e.pagination.currentPage,"page-sizes":e.pagination.pageSizes,"page-size":e.pagination.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pagination.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),r("el-dialog",{attrs:{title:"编辑",visible:e.pemissAddFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.pemissAddFormVisible=t}}},[r("el-form",{ref:"pemissAddForm",attrs:{model:e.pemissAddForm,"label-width":"120px",rules:e.permissAddFormRules}},[r("el-form-item",{attrs:{label:"权限",prop:"sort"}},[r("el-select",{attrs:{placeholder:"请选择权限"},model:{value:e.pemissAddForm.permissionName,callback:function(t){e.$set(e.pemissAddForm,"permissionName",t)},expression:"pemissAddForm.permissionName"}},e._l(e.allPermissions,function(e){return r("el-option",{attrs:{label:e.name,value:e.name}})}))],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{nativeOn:{click:function(t){e.pemissAddFormVisible=!1}}},[e._v("取消")]),e._v(" "),r("el-button",{attrs:{type:"primary",loading:e.pemissAddLoading},nativeOn:{click:function(t){e.addPermissSubmit(t)}}},[e._v("提交")])],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"编辑",visible:e.editFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.editFormVisible=t}}},[r("el-form",{ref:"editForm",attrs:{model:e.editForm,"label-width":"80px",rules:e.editFormRules}},[r("el-form-item",{attrs:{label:"名称",prop:"name"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"部门",prop:"departmentName"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.editForm.departmentName,callback:function(t){e.$set(e.editForm,"departmentName",t)},expression:"editForm.departmentName"}},e._l(e.departments,function(e){return r("el-option",{attrs:{label:e.name,value:e.name}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"职能描述",prop:"description"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.description,callback:function(t){e.$set(e.editForm,"description",t)},expression:"editForm.description"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"电话号码",prop:"phoneNumber"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.phoneNumber,callback:function(t){e.$set(e.editForm,"phoneNumber",t)},expression:"editForm.phoneNumber"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"邮箱",prop:"mailbox"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.mailbox,callback:function(t){e.$set(e.editForm,"mailbox",t)},expression:"editForm.mailbox"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"QQ",prop:"price"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.qqNumber,callback:function(t){e.$set(e.editForm,"qqNumber",e._n(t))},expression:"editForm.qqNumber"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"微信",prop:"price"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.weixin,callback:function(t){e.$set(e.editForm,"weixin",t)},expression:"editForm.weixin"}})],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{nativeOn:{click:function(t){e.editFormVisible=!1}}},[e._v("取消")]),e._v(" "),r("el-button",{attrs:{type:"primary",loading:e.editLoading},nativeOn:{click:function(t){e.editSubmit(t)}}},[e._v("提交")])],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"新增",visible:e.addFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.addFormVisible=t}}},[r("el-form",{ref:"addForm",attrs:{model:e.addForm,"label-width":"80px",rules:e.editFormRules}},[r("el-form-item",{attrs:{label:"名称",prop:"name"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"部门",prop:"departmentName"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addForm.departmentName,callback:function(t){e.$set(e.addForm,"departmentName",t)},expression:"addForm.departmentName"}},e._l(e.departments,function(e){return r("el-option",{attrs:{label:e.name,value:e.name}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"职能描述",prop:"description"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.description,callback:function(t){e.$set(e.addForm,"description",t)},expression:"addForm.description"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"电话号码",prop:"phoneNumber"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.phoneNumber,callback:function(t){e.$set(e.addForm,"phoneNumber",t)},expression:"addForm.phoneNumber"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"邮箱",prop:"mailbox"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.mailbox,callback:function(t){e.$set(e.addForm,"mailbox",t)},expression:"addForm.mailbox"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"QQ",prop:"price"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.qqNumber,callback:function(t){e.$set(e.addForm,"qqNumber",e._n(t))},expression:"addForm.qqNumber"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"微信",prop:"price"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.weixin,callback:function(t){e.$set(e.addForm,"weixin",t)},expression:"addForm.weixin"}})],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{nativeOn:{click:function(t){e.addFormVisible=!1}}},[e._v("取消")]),e._v(" "),r("el-button",{attrs:{type:"primary",loading:e.addLoading},nativeOn:{click:function(t){e.addSubmit(t)}}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]}},1053:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[r("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[r("el-form",{attrs:{inline:!0}},[r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("新增")])],1)],1)],1),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.departments,border:"","highlight-current-row":""},on:{"selection-change":e.selsChange}},[r("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),r("el-table-column",{attrs:{type:"index",width:"60",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{label:"部门信息",width:"560",align:"center"}},[r("el-table-column",{attrs:{prop:"name",label:"名称",width:"140","column-key":"id",sortable:"",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"description",label:"部门职能",width:"300",sortable:"",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"responsorName",label:"负责人",width:"120",sortable:"",align:"center"}})],1),e._v(" "),r("el-table-column",{attrs:{label:"系统属性",width:"320",align:"center"}},[r("el-table-column",{attrs:{prop:"creatorName",label:"创建者",width:"120",sortable:"",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{type:"date",prop:"createTime",label:"创建时间","min-width":"180",sortable:"",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"updatorName",label:"最后更新人","min-width":"180",sortable:"",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{type:"date",prop:"lastmodifiedTime",label:"最后更新时间","min-width":"180",sortable:"",align:"center"}})],1),e._v(" "),r("el-table-column",{attrs:{label:"操作",width:"150",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"small"},on:{click:function(r){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),r("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(r){e.handleDel(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),r("el-col",{staticClass:"toolbar",attrs:{span:24}},[r("el-button",{attrs:{type:"danger",disabled:0===this.sels.length},on:{click:e.batchRemove}},[e._v("批量删除")]),e._v(" "),r("el-pagination",{staticClass:"pagenation",attrs:{"current-page":e.pagination.currentPage,"page-sizes":e.pagination.pageSizes,"page-size":e.pagination.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pagination.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),r("el-dialog",{attrs:{title:"编辑",visible:e.editFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.editFormVisible=t}}},[r("el-form",{ref:"editForm",attrs:{model:e.editForm,"label-width":"120px",rules:e.editFormRules}},[r("el-form-item",{attrs:{label:"部门名称",prop:"name"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"部门负责人",prop:"sort"}},[r("el-select",{attrs:{placeholder:"请选择部门负责人"},model:{value:e.editForm.responsorName,callback:function(t){e.$set(e.editForm,"responsorName",t)},expression:"editForm.responsorName"}},e._l(e.departmentUsers,function(e){return r("el-option",{attrs:{label:e.name,value:e.name}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"部门职能描述"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.editForm.description,callback:function(t){e.$set(e.editForm,"description",t)},expression:"editForm.description"}})],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{nativeOn:{click:function(t){e.editFormVisible=!1}}},[e._v("取消")]),e._v(" "),r("el-button",{attrs:{type:"primary",loading:e.editLoading},nativeOn:{click:function(t){e.editSubmit(t)}}},[e._v("提交")])],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"新增",visible:e.addFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.addFormVisible=t}}},[r("el-form",{ref:"addForm",attrs:{model:e.addForm,"label-width":"120px",rules:e.editFormRules}},[r("el-form-item",{attrs:{label:"部门名称",prop:"name"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"部门职能描述"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.addForm.description,callback:function(t){e.$set(e.addForm,"description",t)},expression:"addForm.description"}})],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{nativeOn:{click:function(t){e.addFormVisible=!1}}},[e._v("取消")]),e._v(" "),r("el-button",{attrs:{type:"primary",loading:e.addLoading},nativeOn:{click:function(t){e.addSubmit(t)}}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]}},1054:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-col",{staticClass:"toolbar",attrs:{span:24}},[r("el-button",{attrs:{type:"primary",size:"midium"},on:{click:e.handleFilterAdd}},[e._v("按条件查询")]),e._v(" "),r("el-button",{attrs:{type:"primary",size:"midium"},on:{click:e.handleAdd}},[e._v("新增")]),e._v(" "),r("el-button",{attrs:{type:"primary",size:"midium",disabled:0===this.sels.length},on:{click:e.quickInput}},[e._v("快速入库")])],1),e._v(" "),r("el-dialog",{attrs:{title:"添加查询条件",visible:e.filterVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.filterVisible=t},close:e.onFilterClose}},[r("el-form",{ref:"addForm",attrs:{model:e.filters,"label-width":"150px",rules:e.filterRules}},[r("el-form-item",{attrs:{label:"所属部门",prop:"departmentId"}},[r("el-select",{attrs:{placeholder:"请选择"},on:{change:e.selectFilterDepartment},model:{value:e.filters.departmentId,callback:function(t){e.$set(e.filters,"departmentId",t)},expression:"filters.departmentId"}},e._l(e.allDepartments,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"负责人",prop:"requestorId"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.filters.requestorId,callback:function(t){e.$set(e.filters,"requestorId",t)},expression:"filters.requestorId"}},e._l(e.filterRequestors,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"申请时间"}},[r("el-col",{attrs:{span:11}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{editable:!1,"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime","picker-options":e.timeOptions},model:{value:e.filters.requestTime_start,callback:function(t){e.$set(e.filters,"requestTime_start",t)},expression:"filters.requestTime_start"}})],1),e._v(" "),r("el-col",{staticClass:"line",attrs:{span:2}},[e._v("——")]),e._v(" "),r("el-col",{attrs:{span:11}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{editable:!1,"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime","picker-options":e.timeOptions},model:{value:e.filters.requestTime_end,callback:function(t){e.$set(e.filters,"requestTime_end",t)},expression:"filters.requestTime_end"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"申请总价"}},[r("el-col",{attrs:{span:11}},[r("el-input",{attrs:{placeholder:"请输入价格范围"},model:{value:e.filters.price_start,callback:function(t){e.$set(e.filters,"price_start",e._n(t))},expression:"filters.price_start"}})],1),e._v(" "),r("el-col",{staticClass:"line",attrs:{span:2}},[e._v("——")]),e._v(" "),r("el-col",{attrs:{span:11}},[r("el-input",{attrs:{placeholder:"请输入价格范围"},model:{value:e.filters.price_end,callback:function(t){e.$set(e.filters,"price_end",e._n(t))},expression:"filters.price_end"}})],1)],1),e._v(" "),r("el-row",[r("el-form-item",{attrs:{align:"right"}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.refreshData()}}},[e._v("刷新数据")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleResetFilter()}}},[e._v("重置")])],1)],1)],1)],1),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"buyOrders",staticStyle:{width:"100%"},attrs:{data:e.buyOrders,"span-method":e.arraySpanMethod},on:{"selection-change":e.selsChange,"sort-change":e.sortAll}},[r("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),r("el-table-column",{attrs:{type:"index",width:"60",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{label:"采购单明细",align:"center",width:"800"}},[r("el-table-column",{attrs:{label:"名称",prop:"buyOrderItems_name","min-width":"120",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{label:"种类",prop:"buyOrderItems_sort","min-width":"120",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{label:"规格",prop:"buyOrderItems_spec","min-width":"120",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{label:"单位",prop:"buyOrderItems_unit","min-width":"120",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{label:"数量",prop:"buyOrderItems_number","min-width":"120",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{label:"实际单价",prop:"buyOrderItems_price","min-width":"120",align:"center"}})],1),e._v(" "),r("el-table-column",{attrs:{label:"采购单信息",align:"center",width:"1060"}},[r("el-table-column",{attrs:{label:"审核进度",prop:"approvalResult",filters:[{text:"已通过",value:"1"},{text:"审核中",value:2},{text:"已驳回",value:0}],"filter-method":e.filterTag,"min-width":"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-popover",{attrs:{trigger:"hover",placement:"top",disabled:e.showPopover(t.row.approvalResult)}},[r("el-button",{attrs:{type:"primary",round:"",size:"small"},on:{click:function(r){e.approve(t.row.id,1)}}},[e._v("批准通过")]),e._v(" "),r("el-button",{attrs:{type:"danger",round:"",size:"small"},on:{click:function(r){e.approve(t.row.id,0)}}},[e._v("不通过")]),e._v(" "),r("div",{attrs:{slot:"reference"},slot:"reference"},[r("el-tag",{attrs:{type:e.tagChange(t)}},[e._v(e._s(t.row.tag))])],1)],1)]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"是否已经入库",prop:"hasBeenInput",formatter:e.formatInputFlag,"min-width":"140",sortable:"custom",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{label:"申请部门",prop:"departmentName","min-width":"140",sortable:"custom",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{label:"申请人",prop:"requestorName","min-width":"140",sortable:"custom",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{label:"申请时间",prop:"requestTime","min-width":"200",sortable:"custom",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{label:"申请总价",prop:"requestTotalPrice","min-width":"140",sortable:"custom",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{label:"申请原因",prop:"description","min-width":"200",sortable:"custom",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{label:"发票地址",prop:"bills","min-width":"140",sortable:"custom",align:"center"}})],1),e._v(" "),r("el-table-column",{attrs:{label:"系统属性",width:"320",align:"center"}},[r("el-table-column",{attrs:{prop:"creatorName",label:"创建者",width:"120",sortable:"custom",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{type:"date",prop:"createTime",label:"创建时间","min-width":"180",sortable:"custom",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"updatorName",label:"最后更新人","min-width":"180",sortable:"custom",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{type:"date",prop:"lastmodifiedTime",label:"最后更新时间","min-width":"180",sortable:"custom",align:"center"}})],1),e._v(" "),r("el-table-column",{attrs:{label:"操作",width:"150",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"small",disabled:e.checkInApproval(t.row.approvalResult)},on:{click:function(r){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),r("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(r){e.handleDel(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),r("el-col",{staticClass:"toolbar",attrs:{span:24}},[r("el-button",{attrs:{type:"danger",disabled:0===this.sels.length},on:{click:e.batchRemove}},[e._v("批量删除")]),e._v(" "),r("el-popover",{ref:"batchApprovalPopover",attrs:{trigger:"click",placement:"top-start"}},[r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.batchApprove(1)}}},[e._v("批准通过")]),e._v(" "),r("el-button",{staticStyle:{float:"right"},attrs:{type:"danger",size:"mini"},on:{click:function(t){e.batchApprove(0)}}},[e._v("驳回")])],1),e._v(" "),r("el-button",{directives:[{name:"popover",rawName:"v-popover:batchApprovalPopover",arg:"batchApprovalPopover"}],attrs:{type:"primary",disabled:0===this.sels.length}},[e._v("批量审核")]),e._v(" "),r("el-pagination",{staticClass:"pagination",attrs:{"current-page":e.pagination.currentPage,"page-sizes":e.pagination.pageSizes,"page-size":e.pagination.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pagination.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),r("el-dialog",{attrs:{fullscreen:"",title:"编辑",visible:e.editFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.editFormVisible=t},close:function(t){e.clearValidate("editForm")}}},[r("el-form",{ref:"editForm",attrs:{model:e.editObj,"label-width":"80px",rules:e.editFormRules}},[r("el-form-item",{attrs:{label:"所属部门",prop:"departmentId"}},[r("el-select",{attrs:{placeholder:"请选择"},on:{change:e.selectEditDepartment},model:{value:e.editObj.departmentId,callback:function(t){e.$set(e.editObj,"departmentId",t)},expression:"editObj.departmentId"}},e._l(e.allDepartments,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"负责人",prop:"requestorId"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.editObj.requestorId,callback:function(t){e.$set(e.editObj,"requestorId",t)},expression:"editObj.requestorId"}},e._l(e.editRequestors,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"申请时间",prop:"requestTime"}},[r("el-date-picker",{attrs:{editable:!1,"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",align:"right","picker-options":e.timeOptions},model:{value:e.editObj.requestTime,callback:function(t){e.$set(e.editObj,"requestTime",t)},expression:"editObj.requestTime"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"物品明细",prop:"buyOrderItems"}},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.editObj.buyOrderItems,"show-summary":"","summary-method":e.getSummaries,border:"",height:"350px","max-height":"999999px","highlight-current-row":""},on:{"selection-change":e.selsChange}},[r("el-table-column",{attrs:{label:"名称",prop:"name",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-autocomplete",{attrs:{"fetch-suggestions":e.querySearchAsync,placeholder:"请输入名称"},on:{select:function(r){e.handleSelect(t.row,r)}},model:{value:t.row.name,callback:function(r){e.$set(t.row,"name",r)},expression:"scope.row.name"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"数量",prop:"number",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{attrs:{placeholder:"请输入数量"},model:{value:t.row.number,callback:function(r){e.$set(t.row,"number",r)},expression:"scope.row.number"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"规格",prop:"spec",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{attrs:{placeholder:"请先输入名称"},model:{value:t.row.spec,callback:function(r){e.$set(t.row,"spec",r)},expression:"scope.row.spec"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"单价",prop:"price",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{attrs:{placeholder:"请先输入名称"},model:{value:t.row.price,callback:function(r){e.$set(t.row,"price",r)},expression:"scope.row.price"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"单位",prop:"unit",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{attrs:{placeholder:"请先输入名称"},model:{value:t.row.unit,callback:function(r){e.$set(t.row,"unit",r)},expression:"scope.row.unit"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"50",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-minus"},on:{click:function(r){e.handleRemoveBuyOrderItem(t.$index,e.editObj.buyOrderItems)}}})]}}])})],1),e._v(" "),r("el-form-item",{staticStyle:{"margin-top":"10px"}},[r("el-button",{attrs:{type:"primary",size:"medium",icon:"el-icon-plus"},on:{click:function(t){e.handleAddBuyOrderItem(e.editObj.buyOrderItems)}}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"申请描述",prop:"description"}},[r("el-input",{attrs:{type:"textarea",rows:4,autosize:""},model:{value:e.editObj.description,callback:function(t){e.$set(e.editObj,"description",t)},expression:"editObj.description"}})],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary",loading:e.editLoading},on:{click:function(t){e.handleEditFormSubmit("editForm")}}},[e._v("提交")])],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"新增",fullscreen:"",visible:e.addFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.addFormVisible=t},close:function(t){e.clearValidate("addForm")}}},[r("el-form",{ref:"addForm",attrs:{model:e.addObj,"label-width":"80px",rules:e.addFormRules}},[r("el-form-item",{attrs:{label:"所属部门",prop:"departmentId"}},[r("el-select",{attrs:{placeholder:"请选择"},on:{change:e.selectAddDepartment},model:{value:e.addObj.departmentId,callback:function(t){e.$set(e.addObj,"departmentId",t)},expression:"addObj.departmentId"}},e._l(e.allDepartments,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"负责人",prop:"requestorId"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addObj.requestorId,callback:function(t){e.$set(e.addObj,"requestorId",t)},expression:"addObj.requestorId"}},e._l(e.addRequestors,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"申请时间",prop:"requestTime"}},[r("el-date-picker",{attrs:{editable:!1,"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",align:"right","picker-options":e.timeOptions},model:{value:e.addObj.requestTime,callback:function(t){e.$set(e.addObj,"requestTime",t)},expression:"addObj.requestTime"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"物品明细",prop:"buyOrderItems"}},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.addObj.buyOrderItems,"show-summary":"","summary-method":e.getSummaries,border:"",height:"350px","max-height":"999999px","highlight-current-row":""},on:{"selection-change":e.selsChange}},[r("el-table-column",{attrs:{label:"名称",prop:"name",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-autocomplete",{attrs:{"fetch-suggestions":e.querySearchAsync,placeholder:"请输入名称"},on:{select:function(r){e.handleSelect(t.row,r)}},model:{value:t.row.name,callback:function(r){e.$set(t.row,"name",r)},expression:"scope.row.name"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"数量",prop:"number",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{attrs:{placeholder:"请输入数量"},model:{value:t.row.number,callback:function(r){e.$set(t.row,"number",r)},expression:"scope.row.number"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"规格",prop:"spec",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{attrs:{placeholder:"请先输入名称"},model:{value:t.row.spec,callback:function(r){e.$set(t.row,"spec",r)},expression:"scope.row.spec"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"单价",prop:"price",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{attrs:{placeholder:"请先输入名称"},model:{value:t.row.price,callback:function(r){e.$set(t.row,"price",r)},expression:"scope.row.price"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"单位",prop:"unit",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{attrs:{placeholder:"请先输入名称"},model:{value:t.row.unit,callback:function(r){e.$set(t.row,"unit",r)},expression:"scope.row.unit"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"50",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-minus"},on:{click:function(r){e.handleRemoveBuyOrderItem(t.$index,e.addObj.buyOrderItems)}}})]}}])})],1),e._v(" "),r("el-form-item",{staticStyle:{"margin-top":"10px"}},[r("el-button",{attrs:{type:"primary",size:"medium",icon:"el-icon-plus"},on:{click:function(t){e.handleAddBuyOrderItem(e.addObj.buyOrderItems)}}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"申请描述",prop:"description"}},[r("el-input",{attrs:{type:"textarea",rows:4,autosize:""},model:{value:e.addObj.description,callback:function(t){e.$set(e.addObj,"description",t)},expression:"addObj.description"}})],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary",loading:e.addLoading},on:{click:function(t){e.handleAddFormSubmit("addForm")}}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]}},1055:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-row",{staticClass:"container"},[r("el-col",{staticClass:"header",attrs:{span:24}},[r("el-col",{staticClass:"logo",class:e.collapsed?"logo-collapse-width":"logo-width",attrs:{span:10}},[e._v("\n\t\t\t"+e._s(e.collapsed?"":e.sysName)+"\n\t\t")]),e._v(" "),r("el-col",{attrs:{span:10}},[r("div",{staticClass:"tools",on:{click:function(t){t.preventDefault(),e.collapse(t)}}},[r("i",{staticClass:"fa fa-align-justify"})])]),e._v(" "),r("el-col",{staticClass:"userinfo",attrs:{span:4}},[r("el-dropdown",{attrs:{trigger:"hover"}},[r("span",{staticClass:"el-dropdown-link userinfo-inner"},[r("img",{attrs:{src:this.sysUserAvatar}}),e._v(" "+e._s(e.sysUserName))]),e._v(" "),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-dropdown-item",[e._v("我的消息")]),e._v(" "),r("el-dropdown-item",[e._v("设置")]),e._v(" "),r("el-dropdown-item",{attrs:{divided:""},nativeOn:{click:function(t){e.logout(t)}}},[e._v("退出登录")])],1)],1)],1)],1),e._v(" "),r("el-col",{staticClass:"main",attrs:{span:24}},[r("aside",{class:e.collapsed?"menu-collapsed":"menu-expanded"},[r("el-menu",{directives:[{name:"show",rawName:"v-show",value:!e.collapsed,expression:"!collapsed"}],staticClass:"el-menu-vertical-demo",attrs:{"default-active":e.$route.path,"unique-opened":"",router:""},on:{open:e.handleopen,close:e.handleclose,select:e.handleselect}},[e._l(e.$router.options.routes,function(t,n){return t.hidden?e._e():[t.leaf?e._e():r("el-submenu",{attrs:{index:n+""}},[r("template",{slot:"title"},[r("i",{class:t.iconCls}),e._v(e._s(t.name))]),e._v(" "),e._l(t.children,function(t){return t.hidden?e._e():r("el-menu-item",{key:t.path,attrs:{index:t.path}},[e._v(e._s(t.name))])})],2),e._v(" "),t.leaf&&t.children.length>0?r("el-menu-item",{attrs:{index:t.children[0].path}},[r("i",{class:t.iconCls}),e._v(e._s(t.children[0].name))]):e._e()]})],2),e._v(" "),r("ul",{directives:[{name:"show",rawName:"v-show",value:e.collapsed,expression:"collapsed"}],ref:"menuCollapsed",staticClass:"el-menu el-menu-vertical-demo collapsed"},e._l(e.$router.options.routes,function(t,n){return t.hidden?e._e():r("li",{staticClass:"el-submenu item"},[t.leaf?[r("li",{staticClass:"el-submenu"},[r("div",{staticClass:"el-submenu__title el-menu-item",class:e.$route.path==t.children[0].path?"is-active":"",staticStyle:{"padding-left":"20px",height:"56px","line-height":"56px",padding:"0 20px"},on:{click:function(r){e.$router.push(t.children[0].path)}}},[r("i",{class:t.iconCls})])])]:[r("div",{staticClass:"el-submenu__title",staticStyle:{"padding-left":"20px"},on:{mouseover:function(t){e.showMenu(n,!0)},mouseout:function(t){e.showMenu(n,!1)}}},[r("i",{class:t.iconCls})]),e._v(" "),r("ul",{staticClass:"el-menu submenu",class:"submenu-hook-"+n,on:{mouseover:function(t){e.showMenu(n,!0)},mouseout:function(t){e.showMenu(n,!1)}}},e._l(t.children,function(t){return t.hidden?e._e():r("li",{key:t.path,staticClass:"el-menu-item",class:e.$route.path==t.path?"is-active":"",staticStyle:{"padding-left":"40px"},on:{click:function(r){e.$router.push(t.path)}}},[e._v(e._s(t.name))])}))]],2)}))],1),e._v(" "),r("section",{staticClass:"content-container"},[r("div",{staticClass:"grid-content bg-purple-light"},[r("el-col",{staticClass:"breadcrumb-container",attrs:{span:24}},[r("strong",{staticClass:"title"},[e._v(e._s(e.$route.name))]),e._v(" "),r("el-breadcrumb",{staticClass:"breadcrumb-inner",attrs:{separator:"/"}},e._l(e.$route.matched,function(t){return r("el-breadcrumb-item",{key:t.path},[e._v("\n\t\t\t\t\t\t\t"+e._s(t.name)+"\n\t\t\t\t\t\t")])}))],1),e._v(" "),r("el-col",{staticClass:"content-wrapper",attrs:{span:24}},[r("transition",{attrs:{name:"fade",mode:"out-in"}},[r("router-view")],1)],1)],1)])])],1)},staticRenderFns:[]}},1056:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-form-item",{attrs:{label:e.options.label,prop:e.prop}},["input"===e.options.type||"textarea"===e.options.type?r("el-input",{attrs:{type:e.options.type,placeholder:e.options.placeholder,disabled:e.options.disabled},model:{value:e.ruleForm[e.prop],callback:function(t){e.$set(e.ruleForm,e.prop,t)},expression:"ruleForm[prop]"}}):e._e(),e._v(" "),"select"===e.options.type?r("el-select",{attrs:{filterable:e.computedFilterAble(e.options),multiple:e.options.multiple,disabled:e.options.disabled,placeholder:e.options.placeholder},model:{value:e.ruleForm[e.prop],callback:function(t){e.$set(e.ruleForm,e.prop,t)},expression:"ruleForm[prop]"}},e._l(e.options.options,function(e){return r("el-option",{attrs:{label:e.label,value:e.value,disabled:e.disabled}})})):e._e(),e._v(" "),"switch"===e.options.type?r("el-switch",{attrs:{"on-text":"","off-text":""},model:{value:e.ruleForm[e.prop],callback:function(t){e.$set(e.ruleForm,e.prop,t)},expression:"ruleForm[prop]"}}):e._e(),e._v(" "),"date"===e.options.type||"datetime"===e.options.type?r("el-date-picker",{attrs:{type:e.options.type,"value-format":"yyyy-MM-dd HH:mm:ss",align:"right",placeholder:e.options.placeholder},model:{value:e.ruleForm[e.prop],callback:function(t){e.$set(e.ruleForm,e.prop,t)},expression:"ruleForm[prop]"}}):e._e(),e._v(" "),"checkbox"===e.options.type?r("el-checkbox-group",{model:{value:e.ruleForm[e.prop],callback:function(t){e.$set(e.ruleForm,e.prop,t)},expression:"ruleForm[prop]"}},e._l(e.options.options,function(t){return r("el-checkbox",{attrs:{disabled:t.disabled,label:t.value}},[e._v("\n      "+e._s(t.label)+"\n    ")])})):e._e(),e._v(" "),"radio"===e.options.type?r("el-radio-group",{model:{value:e.ruleForm[e.prop],callback:function(t){e.$set(e.ruleForm,e.prop,t)},expression:"ruleForm[prop]"}},e._l(e.options.options,function(t){return r("el-radio",{attrs:{disabled:t.disabled,label:t.value}},[e._v("\n      "+e._s(t.label)+"    \n    ")])})):e._e()],1)},staticRenderFns:[]}},1057:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-col",{staticClass:"toolbar",attrs:{span:24}},[r("el-button",{attrs:{type:"primary",size:"midium"},on:{click:e.handleFilterAdd}},[e._v("按条件查询")]),e._v(" "),r("el-button",{attrs:{type:"primary",size:"midium"},on:{click:e.handleAdd}},[e._v("新增")])],1),e._v(" "),r("el-dialog",{attrs:{title:"添加查询条件",visible:e.filterVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.filterVisible=t},close:e.onFilterClose}},[r("el-form",{ref:"addForm",attrs:{model:e.filters,"label-width":"150px",rules:e.filterRules}},[r("el-form-item",{attrs:{label:"所属部门",prop:"departmentId"}},[r("el-select",{attrs:{placeholder:"请选择"},on:{change:e.selectFilterDepartment},model:{value:e.filters.departmentId,callback:function(t){e.$set(e.filters,"departmentId",t)},expression:"filters.departmentId"}},e._l(e.allDepartments,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"负责人",prop:"requestorId"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.filters.requestorId,callback:function(t){e.$set(e.filters,"requestorId",t)},expression:"filters.requestorId"}},e._l(e.filterRequestors,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"申请时间"}},[r("el-col",{attrs:{span:11}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{editable:!1,"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime","picker-options":e.timeOptions},model:{value:e.filters.requestTime_start,callback:function(t){e.$set(e.filters,"requestTime_start",t)},expression:"filters.requestTime_start"}})],1),e._v(" "),r("el-col",{staticClass:"line",attrs:{span:2}},[e._v("——")]),e._v(" "),r("el-col",{attrs:{span:11}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{editable:!1,"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime","picker-options":e.timeOptions},model:{value:e.filters.requestTime_end,callback:function(t){e.$set(e.filters,"requestTime_end",t)},expression:"filters.requestTime_end"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"申请总价"}},[r("el-col",{attrs:{span:11}},[r("el-input",{attrs:{placeholder:"请输入价格范围"},model:{value:e.filters.price_start,callback:function(t){e.$set(e.filters,"price_start",e._n(t))},expression:"filters.price_start"}})],1),e._v(" "),r("el-col",{staticClass:"line",attrs:{span:2}},[e._v("——")]),e._v(" "),r("el-col",{attrs:{span:11}},[r("el-input",{attrs:{placeholder:"请输入价格范围"},model:{value:e.filters.price_end,callback:function(t){e.$set(e.filters,"price_end",e._n(t))},expression:"filters.price_end"}})],1)],1),e._v(" "),r("el-row",[r("el-form-item",{attrs:{align:"right"}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.refreshData()}}},[e._v("刷新数据")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleResetFilter()}}},[e._v("重置")])],1)],1)],1)],1),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"buyOrders",staticStyle:{width:"100%"},attrs:{data:e.buyOrders,"span-method":e.arraySpanMethod},on:{"selection-change":e.selsChange,"sort-change":e.sortAll}},[r("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),r("el-table-column",{attrs:{type:"index",width:"60",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{label:"库存操作明细",align:"center",width:"800"}},[r("el-table-column",{attrs:{label:"名称",prop:"storeOperationItems_name","min-width":"120",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{label:"种类",prop:"storeOperationItems_sort","min-width":"120",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{label:"规格",prop:"storeOperationItems_spec","min-width":"120",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{label:"单位",prop:"storeOperationItems_unit","min-width":"120",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{label:"数量",prop:"storeOperationItems_number","min-width":"120",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{label:"实际单价",prop:"storeOperationItems_price","min-width":"120",align:"center"}})],1),e._v(" "),r("el-table-column",{attrs:{label:"库存操作信息",align:"center",width:"1060"}},[r("el-table-column",{attrs:{label:"审核进度",prop:"approvalResult",filters:[{text:"已通过",value:"1"},{text:"审核中",value:2},{text:"已驳回",value:0}],"filter-method":e.filterTag,"min-width":"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-popover",{attrs:{trigger:"hover",placement:"top",disabled:e.showPopover(t.row.approvalResult)}},[r("el-button",{attrs:{type:"primary",round:"",size:"small"},on:{click:function(r){e.approve(t.row.id,1)}}},[e._v("批准通过")]),e._v(" "),r("el-button",{attrs:{type:"danger",round:"",size:"small"},on:{click:function(r){e.approve(t.row.id,0)}}},[e._v("不通过")]),e._v(" "),r("div",{attrs:{slot:"reference"},slot:"reference"},[r("el-tag",{attrs:{type:e.tagChange(t)}},[e._v(e._s(t.row.tag))])],1)],1)]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"操作类型",prop:"type","min-width":"200",formatter:e.formatTypeFlag,sortable:"custom",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{label:"申请部门",prop:"departmentName","min-width":"140",sortable:"custom",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{label:"申请人",prop:"requestorName","min-width":"140",sortable:"custom",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{label:"申请时间",prop:"requestTime","min-width":"200",sortable:"custom",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{label:"申请总价",prop:"requestTotalPrice","min-width":"140",sortable:"custom",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{label:"申请原因",prop:"description","min-width":"200",sortable:"custom",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{label:"审批意见",prop:"opinion","min-width":"200",sortable:"custom",align:"center"}})],1),e._v(" "),r("el-table-column",{attrs:{label:"系统属性",width:"320",align:"center"}},[r("el-table-column",{attrs:{prop:"creatorName",label:"创建者",width:"120",sortable:"custom",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{type:"date",prop:"createTime",label:"创建时间","min-width":"180",sortable:"custom",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"updatorName",label:"最后更新人","min-width":"180",sortable:"custom",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{type:"date",prop:"lastmodifiedTime",label:"最后更新时间","min-width":"180",sortable:"custom",align:"center"}})],1),e._v(" "),r("el-table-column",{attrs:{label:"操作",width:"150",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"small",disabled:e.checkInApproval(t.row.approvalResult)},on:{click:function(r){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),r("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(r){e.handleDel(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),r("el-col",{staticClass:"toolbar",attrs:{span:24}},[r("el-button",{attrs:{type:"danger",disabled:0===this.sels.length},on:{click:e.batchRemove}},[e._v("批量删除")]),e._v(" "),r("el-popover",{ref:"batchApprovalPopover",attrs:{trigger:"click",placement:"top-start"}},[r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.batchApprove(1)}}},[e._v("批准通过")]),e._v(" "),r("el-button",{staticStyle:{float:"right"},attrs:{type:"danger",size:"mini"},on:{click:function(t){e.batchApprove(0)}}},[e._v("驳回")])],1),e._v(" "),r("el-button",{directives:[{name:"popover",rawName:"v-popover:batchApprovalPopover",arg:"batchApprovalPopover"}],attrs:{type:"primary",disabled:0===this.sels.length}},[e._v("批量审核")]),e._v(" "),r("el-pagination",{staticClass:"pagination",attrs:{"current-page":e.pagination.currentPage,"page-sizes":e.pagination.pageSizes,"page-size":e.pagination.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pagination.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),r("el-dialog",{attrs:{fullscreen:"",title:"编辑",visible:e.editFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.editFormVisible=t},close:function(t){e.clearValidate("editForm")}}},[r("el-form",{ref:"editForm",attrs:{model:e.editObj,"label-width":"80px",rules:e.editFormRules}},[r("el-form-item",{attrs:{label:"所属部门",prop:"departmentId"}},[r("el-select",{attrs:{placeholder:"请选择"},on:{change:e.selectEditDepartment},model:{value:e.editObj.departmentId,callback:function(t){e.$set(e.editObj,"departmentId",t)},expression:"editObj.departmentId"}},e._l(e.allDepartments,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"负责人",prop:"requestorId"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.editObj.requestorId,callback:function(t){e.$set(e.editObj,"requestorId",t)},expression:"editObj.requestorId"}},e._l(e.editRequestors,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"申请时间",prop:"requestTime"}},[r("el-date-picker",{attrs:{editable:!1,"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",align:"right","picker-options":e.timeOptions},model:{value:e.editObj.requestTime,callback:function(t){e.$set(e.editObj,"requestTime",t)},expression:"editObj.requestTime"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"操作类型",prop:"type"}},[r("el-select",{attrs:{placeholder:"请选择"},on:{change:e.selectEditDepartment},model:{value:e.editObj.type,callback:function(t){e.$set(e.editObj,"type",t)},expression:"editObj.type"}},e._l(e.allTypes,function(e){return r("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"物品明细",prop:"storeOperationItems"}},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.editObj.storeOperationItems,"show-summary":"","summary-method":e.getSummaries,border:"",height:"350px","max-height":"999999px","highlight-current-row":""},on:{"selection-change":e.selsChange}},[r("el-table-column",{attrs:{label:"名称",prop:"name",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-autocomplete",{attrs:{"fetch-suggestions":e.querySearchAsync,placeholder:"请输入名称"},on:{select:function(r){e.handleSelect(t.row,r)}},model:{value:t.row.name,callback:function(r){e.$set(t.row,"name",r)},expression:"scope.row.name"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"数量",prop:"number",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{attrs:{placeholder:"请输入数量"},model:{value:t.row.number,callback:function(r){e.$set(t.row,"number",r)},expression:"scope.row.number"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"规格",prop:"spec",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{attrs:{placeholder:"请先输入名称"},model:{value:t.row.spec,callback:function(r){e.$set(t.row,"spec",r)},expression:"scope.row.spec"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"单价",prop:"price",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{attrs:{placeholder:"请先输入名称"},model:{value:t.row.price,callback:function(r){e.$set(t.row,"price",r)},expression:"scope.row.price"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"单位",prop:"unit",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{attrs:{placeholder:"请先输入名称"},model:{value:t.row.unit,callback:function(r){e.$set(t.row,"unit",r)},expression:"scope.row.unit"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"50",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-minus"},on:{click:function(r){e.handleRemoveBuyOrderItem(t.$index,e.editObj.storeOperationItems)}}})]}}])})],1),e._v(" "),r("el-form-item",{staticStyle:{"margin-top":"10px"}},[r("el-button",{attrs:{type:"primary",size:"medium",icon:"el-icon-plus"},on:{click:function(t){e.handleAddBuyOrderItem(e.editObj.storeOperationItems)}}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"申请描述",prop:"description"}},[r("el-input",{attrs:{type:"textarea",rows:4,autosize:""},model:{value:e.editObj.description,callback:function(t){e.$set(e.editObj,"description",t)},expression:"editObj.description"}})],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary",loading:e.editLoading},on:{click:function(t){e.handleEditFormSubmit("editForm")}}},[e._v("提交")])],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"新增",fullscreen:"",visible:e.addFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.addFormVisible=t},close:function(t){e.clearValidate("addForm")}}},[r("el-form",{ref:"addForm",attrs:{model:e.addObj,"label-width":"80px",rules:e.addFormRules}},[r("el-form-item",{attrs:{label:"所属部门",prop:"departmentId"}},[r("el-select",{attrs:{placeholder:"请选择"},on:{change:e.selectAddDepartment},model:{value:e.addObj.departmentId,callback:function(t){e.$set(e.addObj,"departmentId",t)},expression:"addObj.departmentId"}},e._l(e.allDepartments,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"负责人",prop:"requestorId"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addObj.requestorId,callback:function(t){e.$set(e.addObj,"requestorId",t)},expression:"addObj.requestorId"}},e._l(e.addRequestors,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"申请时间",prop:"requestTime"}},[r("el-date-picker",{attrs:{editable:!1,"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",align:"right","picker-options":e.timeOptions},model:{value:e.addObj.requestTime,callback:function(t){e.$set(e.addObj,"requestTime",t)},expression:"addObj.requestTime"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"操作类型",prop:"type"}},[r("el-select",{attrs:{placeholder:"请选择"},on:{change:e.selectEditDepartment},model:{value:e.addObj.type,callback:function(t){e.$set(e.addObj,"type",t)},expression:"addObj.type"}},e._l(e.allTypes,function(e){return r("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"物品明细",prop:"storeOperationItems"}},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.addObj.storeOperationItems,"show-summary":"","summary-method":e.getSummaries,border:"",height:"350px","max-height":"999999px","highlight-current-row":""},on:{"selection-change":e.selsChange}},[r("el-table-column",{attrs:{label:"名称",prop:"name",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-autocomplete",{attrs:{"fetch-suggestions":e.querySearchAsync,placeholder:"请输入名称"},on:{select:function(r){e.handleSelect(t.row,r)}},model:{value:t.row.name,callback:function(r){e.$set(t.row,"name",r)},expression:"scope.row.name"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"数量",prop:"number",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{attrs:{placeholder:"请输入数量"},model:{value:t.row.number,callback:function(r){e.$set(t.row,"number",r)},expression:"scope.row.number"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"规格",prop:"spec",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{attrs:{placeholder:"请先输入名称"},model:{value:t.row.spec,callback:function(r){e.$set(t.row,"spec",r)},expression:"scope.row.spec"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"单价",prop:"price",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{attrs:{placeholder:"请先输入名称"},model:{value:t.row.price,callback:function(r){e.$set(t.row,"price",r)},expression:"scope.row.price"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"单位",prop:"unit",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{attrs:{placeholder:"请先输入名称"},model:{value:t.row.unit,callback:function(r){e.$set(t.row,"unit",r)},expression:"scope.row.unit"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"50",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-minus"},on:{click:function(r){e.handleRemoveBuyOrderItem(t.$index,e.addObj.storeOperationItems)}}})]}}])})],1),e._v(" "),r("el-form-item",{staticStyle:{"margin-top":"10px"}},[r("el-button",{attrs:{type:"primary",size:"medium",icon:"el-icon-plus"},on:{click:function(t){e.handleAddBuyOrderItem(e.addObj.storeOperationItems)}}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"申请描述",prop:"description"}},[r("el-input",{attrs:{type:"textarea",rows:4,autosize:""},model:{value:e.addObj.description,callback:function(t){e.$set(e.addObj,"description",t)},expression:"addObj.description"}})],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary",loading:e.addLoading},on:{click:function(t){e.handleAddFormSubmit("addForm")}}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]}},1058:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"chart-container"},[r("el-row",[r("el-col",[r("div",{staticStyle:{width:"100%",height:"1000px"},attrs:{id:"chartColumn"}})])],1)],1)},staticRenderFns:[]}},1059:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("p",[e._v("根据配置自动生成表单")]),e._v(" "),r("custom-form",{attrs:{name:"test",items:e.formRule,data:e.data,rules:e.rules},on:{"on-submit":e.onSubmit}})],1)},staticRenderFns:[]}},1060:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("p",{staticClass:"page-container"},[e._v("当前定位错误，请检查访问地址")])},staticRenderFns:[]}},1061:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[r("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[r("el-form",{ref:"filters",attrs:{inline:!0,model:e.filters}},[r("el-form-item",[r("el-input",{attrs:{placeholder:"名称"},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,"name",t)},expression:"filters.name"}})],1),e._v(" "),r("el-form-item",[r("el-input",{attrs:{placeholder:"请输入最小单价"},model:{value:e.filters.price_start,callback:function(t){e.$set(e.filters,"price_start",e._n(t))},expression:"filters.price_start"}})],1),e._v(" "),r("el-form-item",[r("el-input",{attrs:{placeholder:"请输入最大单价"},model:{value:e.filters.price_end,callback:function(t){e.$set(e.filters,"price_end",e._n(t))},expression:"filters.price_end"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.getGoodItems}},[e._v("查询")])],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("新增")])],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.handleAddSorts}},[e._v("添加物品种类")])],1)],1)],1),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.goodItems,border:"","highlight-current-row":""},on:{"selection-change":e.selsChange}},[r("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),r("el-table-column",{attrs:{type:"index",width:"60",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{label:"物品明细",width:"720",align:"center"}},[r("el-table-column",{attrs:{prop:"name",label:"名称",width:"140","column-key":"id",sortable:"",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"sort",label:"种类",width:"120",sortable:"",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"spec",label:"规格",width:"120",sortable:"",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"unit",label:"单位",width:"100",sortable:"",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"number",label:"数量","min-width":"120",sortable:"",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"price",label:"单价","min-width":"120",sortable:"",align:"center"}})],1),e._v(" "),r("el-table-column",{attrs:{label:"系统属性",width:"320",align:"center"}},[r("el-table-column",{attrs:{prop:"creatorName",label:"创建者",width:"120",sortable:"",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{type:"date",prop:"createTime",label:"创建时间","min-width":"180",sortable:"",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{prop:"updatorName",label:"最后更新人","min-width":"180",sortable:"",align:"center"}}),e._v(" "),r("el-table-column",{attrs:{type:"date",prop:"lastmodifiedTime",label:"最后更新时间","min-width":"180",sortable:"",align:"center"}})],1),e._v(" "),r("el-table-column",{attrs:{label:"操作",width:"150",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"small"},on:{click:function(r){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),r("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(r){e.handleDel(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),r("el-col",{staticClass:"toolbar",attrs:{span:24}},[r("el-button",{attrs:{type:"danger",disabled:0===this.sels.length},on:{click:e.batchRemove}},[e._v("批量删除")]),e._v(" "),r("el-pagination",{staticClass:"pagenation",attrs:{"current-page":e.pagination.currentPage,"page-sizes":e.pagination.pageSizes,"page-size":e.pagination.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pagination.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),r("el-dialog",{attrs:{title:"编辑",visible:e.editFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.editFormVisible=t}}},[r("el-form",{ref:"editForm",attrs:{model:e.editForm,"label-width":"80px",rules:e.editFormRules}},[r("el-form-item",{attrs:{label:"名称",prop:"name"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"种类",prop:"sort"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.editForm.sort,callback:function(t){e.$set(e.editForm,"sort",t)},expression:"editForm.sort"}},e._l(e.sortNames,function(e){return r("el-option",{attrs:{label:e.name,value:e.name}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"规格",prop:"name"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.spec,callback:function(t){e.$set(e.editForm,"spec",t)},expression:"editForm.spec"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"单位",prop:"unit"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.unit,callback:function(t){e.$set(e.editForm,"unit",t)},expression:"editForm.unit"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"数量",prop:"number",rules:e.numberRules}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.number,callback:function(t){e.$set(e.editForm,"number",e._n(t))},expression:"editForm.number"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"单价",prop:"price",rules:e.priceRules}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.price,callback:function(t){e.$set(e.editForm,"price",e._n(t))},expression:"editForm.price"}})],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{nativeOn:{click:function(t){e.editFormVisible=!1}}},[e._v("取消")]),e._v(" "),r("el-button",{attrs:{type:"primary",loading:e.editLoading},nativeOn:{click:function(t){e.editSubmit(t)}}},[e._v("提交")])],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"新增",visible:e.addFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.addFormVisible=t}}},[r("el-form",{ref:"addForm",attrs:{model:e.addForm,"label-width":"80px",rules:e.editFormRules}},[r("el-form-item",{attrs:{label:"名称",prop:"name"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"种类",prop:"sort"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addForm.sort,callback:function(t){e.$set(e.addForm,"sort",t)},expression:"addForm.sort"}},e._l(e.sortNames,function(e){return r("el-option",{attrs:{label:e.name,value:e.name}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"规格",prop:"name"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.spec,callback:function(t){e.$set(e.addForm,"spec",t)},expression:"addForm.spec"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"单位",prop:"unit"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.unit,callback:function(t){e.$set(e.addForm,"unit",t)},expression:"addForm.unit"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"数量",prop:"number",rules:e.numberRules}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.number,callback:function(t){e.$set(e.addForm,"number",e._n(t))},expression:"addForm.number"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"单价",prop:"price",rules:e.priceRules}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.price,callback:function(t){e.$set(e.addForm,"price",e._n(t))},expression:"addForm.price"}})],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{nativeOn:{click:function(t){e.addFormVisible=!1}}},[e._v("取消")]),e._v(" "),r("el-button",{attrs:{type:"primary",loading:e.addLoading},nativeOn:{click:function(t){e.addSubmit(t)}}},[e._v("提交")])],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"新增种类",visible:e.addSortFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.addSortFormVisible=t}}},[r("el-form",{ref:"addSortForm",attrs:{model:e.addSortForm,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"名称",prop:"name"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addSortForm.name,callback:function(t){e.$set(e.addSortForm,"name",t)},expression:"addSortForm.name"}})],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{nativeOn:{click:function(t){e.addSortFormVisible=!1}}},[e._v("取消")]),e._v(" "),r("el-button",{attrs:{type:"primary",loading:e.addSortLoading},nativeOn:{click:function(t){e.addFormSubmit(t)}}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]}},1101:function(e,t){},113:function(e,t,r){"use strict";function n(e){var t=Object.prototype.toString,r={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regExp","[object Undefined]":"undefined","[object Null]":"null","[object Object]":"object"};return e instanceof Element?"element":r[t.call(e)]}function i(e){var t,r=n(e);if("array"===r)t=[];else{if("object"!==r)return e;t={}}if("array"===r)for(var a=0,o=e.length;a<o;a++)t.push(i(e[a]));else if("object"===r)for(var s in e)t[s]=i(e[s]);return t}Object.defineProperty(t,"__esModule",{value:!0});t.getNewDataAndMap=function(e,t){for(var r=[],n={},a=0,o=0;o<t.length;o++){var s=t[o][e];if(0!==s.length){for(var l=s.length,d=0;d<s.length;d++){var u=i(t[o]);for(var c in s[d])u[e+"_"+c]=s[d][c];u.items=null,r.push(u)}n[a]=l,a+=l}}return{data:r,map:n}},t.getNewData=function(e,t){for(var r=[],n=0;n<t.length;n++){var a=t[n][e];if(null!==a){var o=i(t[n]);for(var s in a)o[e+"_"+s]=a[s];o.item=null,r.push(o)}}return r}},173:function(e,t,r){var n=r(25)(r(458),r(1047),null,null);e.exports=n.exports},29:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="user",i="buyOrder",a="good",o="takeOrder",s=function(e,t){return"http://schoolstores.s1.natapp.cc/schoolStore/admin/"+e+"/"+t};t.requestApi={user:{login:function(e,t){return e.$http.post(s(n,"login"),t)},logout:function(e){return e.$http.post(s(n,"logout"))},findByDepartment:function(e,t){return e.$http.post(s(n,"findUsersByDepartmentId"),t)},findByParam:function(e,t){return e.$http.post(s(n,"findUserBySearchParams"),t)},update:function(e,t){return e.$http.post(s(n,"updateUser"),t)},add:function(e,t){return e.$http.post(s(n,"addUser"),t)},delete:function(e,t){return e.$http.post(s(n,"deleteUser"),t)},deletes:function(e,t){return e.$http.post(s(n,"deleteUsers"),t)},removePermissions:function(e,t){return e.$http.post(s(n,"removePermissions"),t)},addPermissions:function(e,t){return e.$http.post(s(n,"addPermissions"),t)}},config:{getInitData:function(e){return e.$http.get(s("config","getInitData"))},uploadExcels:function(){return s("config","uploadExcels")}},good:{findByParam:function(e,t){return e.$http.post(s(a,"findGoodItemsBySearchParams"),t)},addSort:function(e,t){return e.$http.post(s(a,"addSortItem"),t)},update:function(e,t){return e.$http.post(s(a,"updateGoodItem"),t)},findAllSorts:function(e){return e.$http.get(s(a,"findAllSorts"))},add:function(e,t){return e.$http.post(s(a,"addGoodItem"),t)},delete:function(e,t){return e.$http.post(s(a,"deleteGoodItem"),t)},deletes:function(e,t){return e.$http.post(s(a,"deleteGoodItems"),t)},findByName:function(e,t){return e.$http.get(s(a,"findAllGoodItemByName")+"?name="+t)}},store:{findByParam:function(e,t){return e.$http.post(s("store","findStoreItemsBySearchParams"),t)},findAll:function(e,t,r){return e.$http.get(s("store","findAllStoreItems")+"?page="+t+"&&size="+r)}},takeOrder:{findByParam:function(e,t){return e.$http.post(s(o,"findTakeOrdersBySearchParams"),t)},update:function(e,t){return e.$http.post(s(o,"updateTakeOrder"),t)},add:function(e,t){return e.$http.post(s(o,"addTakeOrder"),t)},delete:function(e,t){return e.$http.post(s(o,"deleteTakeOrder"),t)},deletes:function(e,t){return e.$http.post(s(o,"deleteTakeOrders"),t)},approve:function(e,t){return e.$http.post(s(o,"approve"),t)},quickOutput:function(e,t){return e.$http.post(s(o,"quickOutput"),t)},findById:function(e,t){return e.$http.post(s(o,"findTakeOrderById"),t)}},buyOrder:{findByParam:function(e,t){return e.$http.post(s(i,"findBuyOrdersBySearchParams"),t)},update:function(e,t){return e.$http.post(s(i,"updateBuyOrder"),t)},add:function(e,t){return e.$http.post(s(i,"addBuyOrder"),t)},delete:function(e,t){return e.$http.post(s(i,"deleteBuyOrder"),t)},deletes:function(e,t){return e.$http.post(s(i,"deleteBuyOrders"),t)},approve:function(e,t){return e.$http.post(s(i,"approve"),t)},quickInput:function(e,t){return e.$http.post(s(i,"quickInput"),t)},findById:function(e,t){return e.$http.post(s(i,"findBuyOrderById"),t)}},storeOperation:{findByParam:function(e,t){return e.$http.post(s("storeOperation","findStoreOperationBySearchParams"),t)},update:function(e,t){return e.$http.post(s("storeOperation","updateStoreOperation"),t)},add:function(e,t){return e.$http.post(s("storeOperation","addStoreOperation"),t)},delete:function(e,t){return e.$http.post(s("storeOperation","deleteStoreOperation"),t)},deletes:function(e,t){return e.$http.post(s("storeOperation","deleteStoreOperations"),t)},approve:function(e,t){return e.$http.post(s("storeOperation","approve"),t)},findById:function(e,t){return e.$http.post(s("storeOperation","findStoreOperationById"),t)}},department:{findAll:function(e,t,r){return e.$http.get(s("department","findAllDepartments")+"?page="+t+"&&size="+r)},update:function(e,t){return e.$http.post(s("department","updateDepartment"),t)},add:function(e,t){return e.$http.post(s("department","addDepartment"),t)},delete:function(e,t){return e.$http.post(s("department","deleteDepartment"),t)},deletes:function(e,t){return e.$http.post(s("department","deleteDepartments"),t)}},permission:{findAll:function(e,t,r){return e.$http.get(s("permission","findAllPermissions")+"?page="+t+"&&size="+r)},update:function(e,t){return e.$http.post(s("permission","updatePermission"),t)},add:function(e,t){return e.$http.post(s("permission","addPermission"),t)},delete:function(e,t){return e.$http.post(s("permission","deletePermission"),t)},deletes:function(e,t){return e.$http.post(s("permission","deletePermissions"),t)}}},t.Enum={SYSTEM_ERROR:{code:-2,msg:"系统内部错误"},SUCCESS:{code:0,msg:"成功"},UNKNOWN_ERROR:{code:-1,msg:"未知错误"},PARAM_ERROR:{code:1,msg:"参数不正确"},NAME_SPEC_REPEAT:{code:2,msg:"同样名字和规格的已经重复"},STORE_UNSATISFY:{code:3,msg:"库存不足"},NAME_REPEAT:{code:4,msg:"种类名字已经重复"},RESULT_OUT:{code:5,msg:"审核结果已经出了，不能再修改订单"},PERMISSION_NOT_ALLOWED:{code:6,msg:"用户权限不足"},NAME_FORMAT_ERROR:{code:7,msg:"用户名格式不符"},USER_NOT_FOUND:{code:8,msg:"用户不存在或者密码错误"},USER_LOGIN_SUCCESS:{code:9,msg:"用户登录成功，当前用户为:普通用户"},ADMIN_LOGIN_SUCCESS:{code:10,msg:"用户登录成功，当前用户为:管理员"},NOT_LOGIN:{code:11,msg:"用户尚未登录或者登录已经过期"},LOGIN_OUT_SUCCESS:{code:12,msg:"用户登出成功"},MAIL_FORMAT_ERROR:{code:13,msg:"邮箱格式错误"},MOBILE_FORMAT_ERROR:{code:14,msg:"手机号格式错误"},REGISTER_SUCCESS:{code:15,msg:"注册成功"},USER_AREADLY_IN_SESSION_BEFORE_REGISTER:{code:16,msg:"当前已经有用户登录，请先登出用户再注册"},GET_SORTS_FAIL:{code:17,msg:"获取种类失败"},UPLOAD_FORMAT_ERR:{code:30,msg:"上传模板只能是 xls、xlsx 格式!"},UPLOAD_SIZE_ERR:{code:31,msg:"上传模板大小不能超过 100MB!"},UPLOAD_ERR:{code:32,msg:"上传失败!"}},t.msgUtils={success:function(e,t){e.$message({showClose:!0,message:t,center:!0,type:"success"})},warning:function(e,t){e.$message({showClose:!0,message:t,center:!0,type:"warning"})},error:function(e,t){e.$message({showClose:!0,message:t,center:!0,type:"error"})}},t.permissionMap={admin:"管理员",user:"普通用户"}},402:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(475),i=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=i.default},403:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(1031),a=n(i),o=r(1029),s=n(o),l=r(1030),d=n(l),u=r(1037),c=n(u),m=r(1034),p=n(m),f=r(1038),g=n(f),b=r(1039),h=n(b),v=r(1040),_=n(v),y=r(1043),S=n(y),w=r(1042),E=n(w),O=r(1041),k=n(O),R=r(1035),F=n(R),x=r(1033),q=n(x),C=r(1032),I=n(C),$=r(1036),U=(n($),[{path:"/login",component:a.default,name:"",hidden:!0},{path:"/404",component:s.default,name:"",hidden:!0},{path:"/",component:d.default,name:"",iconCls:"fa fa-address-card",leaf:!0,children:[{path:"/adminHome",component:q.default,name:"使用介绍"}]},{path:"/",component:d.default,name:"基础信息",iconCls:"el-icon-message",children:[{path:"/department",component:p.default,name:"部门"},{path:"/user",component:h.default,name:"用户"},{path:"/permission",component:g.default,name:"权限"},{path:"/goodItem",component:c.default,name:"用品"},{path:"/docxUpload",component:F.default,name:"搬迁简道云文件"}]},{path:"/",component:d.default,name:"库存相关",iconCls:"fa fa-id-card-o",children:[{path:"/buyOrder",component:_.default,name:"采购"},{path:"/takeOrder",component:S.default,name:"申领"},{path:"/storeOperation",component:E.default,name:"库存操作"},{path:"/storeItem",component:k.default,name:"库存"}]},{path:"/",component:d.default,name:"统计",iconCls:"fa fa-bar-chart",children:[{path:"/storeChart",component:I.default,name:"库存"}]},{path:"*",hidden:!0,redirect:{path:"/404"}}]);t.default=U},404:function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(37),o=i(a),s=r(253),l=i(s),d=r(476),u=n(d),c=r(477),m=n(c);o.default.use(l.default);var p={count:10},f={INCREMENT:function(e){e.count++},DECREMENT:function(e){e.count--}};t.default=new l.default.Store({actions:u,getters:m,state:p,mutations:f})},407:function(e,t){},408:function(e,t){},410:function(e,t,r){r(1005);var n=r(25)(r(456),r(1046),null,null);e.exports=n.exports},456:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"app",components:{}}},457:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{ruleForm:Object,prop:String,options:{type:Object,default:function(){return{type:"input"}}}},name:"form-item",methods:{computedFilterAble:function(e){return e.length>12}}}},458:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1028),i=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default={props:{name:String,items:Object,data:Object,rules:Object},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$emit("on-fail"),!1;t.$emit("on-submit",t.data)})},cancel:function(){this.$emit("on-cancel")}},components:{Item:i.default}}},459:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(29);t.default={data:function(){return{sysName:"办公用品仓库管理",collapsed:!1,sysUserName:"",sysUserAvatar:"",form:{name:"",region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""},departments:[]}},methods:{onSubmit:function(){console.log("submit!")},handleopen:function(){},handleclose:function(){},handleselect:function(e,t){},logout:function(){var e=this,t=this;this.$confirm("确认退出吗?","提示",{}).then(function(){n.requestApi.user.logout(e).then(function(r){r=r.body,console.log(r),r.code===n.Enum.SUCCESS?(n.msgUtils.success(e,n.Enum.LOGIN_OUT_SUCCESS),sessionStorage.removeItem("user"),t.$router.push({path:"/login"})):n.msgUtils.warning(e,r.msg)})}).catch(function(){n.msgUtils.error(e,n.Enum.SYSTEM_ERROR.msg)})},collapse:function(){this.collapsed=!this.collapsed},showMenu:function(e,t){this.$refs.menuCollapsed.getElementsByClassName("submenu-hook-"+e)[0].style.display=t?"block":"none"}},mounted:function(){var e=sessionStorage.getItem("user");e&&(e=JSON.parse(e),this.sysUserName=e.name||"",this.sysUserAvatar=e.avatar||"")}}},460:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(260),i=function(e){return e&&e.__esModule?e:{default:e}}(n),a=r(29);t.default={data:function(){return sessionStorage.getItem("not_login")&&"error"===sessionStorage.getItem("not_login")&&a.msgUtils.warning(this,a.Enum.NOT_LOGIN.msg),{logining:!1,ruleForm2:{account:"admin",checkPass:"123456"},rules2:{account:[{required:!0,message:"请输入账号",trigger:"blur"}],checkPass:[{required:!0,message:"请输入密码",trigger:"blur"}]},checked:!0}},methods:{handleReset2:function(){this.$refs.ruleForm2.resetFields()},handleSubmit2:function(e){var t=this,r=this;this.$refs.ruleForm2.validate(function(e){if(!e)return!1;t.logining=!0;var n={name:t.ruleForm2.account,password:t.ruleForm2.checkPass};a.requestApi.user.login(t,n).then(function(e){t.logining=!1,e=e.body,e.code===a.Enum.ADMIN_LOGIN_SUCCESS.code?(sessionStorage.setItem("user",(0,i.default)(e.data)),r.$router.push({path:"/adminHome"})):e.code==a.Enum.USER_LOGIN_SUCCESS.code?(sessionStorage.setItem("user",(0,i.default)(e.data)),sessionStorage.removeItem("not_login"),r.$router.push({path:"/userHome"})):a.msgUtils.warning(t,e.msg)},function(e){a.msgUtils.error(t,a.Enum.SYSTEM_ERROR.msg)})})}}}},461:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(721),a=n(i),o=r(49),s=(n(o),r(29));r(113);t.default={data:function(){return{chartColumn:null,storeData:null}},methods:{getStoreData:function(){var e=this;s.requestApi.store.findAll(this,0,999999).then(function(t){if(t=t.body,t.code===s.Enum.SUCCESS.code){e.storeData=t.data.content;for(var r=[],n=[],i=[],a=0;a<e.storeData.length;a++)r.push(e.storeData[a].goodItem.name),n.push(e.storeData[a].number),i.push(e.storeData[a].totalPrice);e.storeData.category=r,e.storeData.numberData=n,e.storeData.priceData=i}},function(t){s.msgUtils.error(e,s.Enum.SYSTEM_ERROR.msg)}).then(function(t){e.drawCharts()})},drawColumnChart:function(){this.chartColumn=a.default.init(document.getElementById("chartColumn"));var e={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["库存","当前库存总价"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value"},yAxis:{type:"category",data:this.storeData.category},series:[{name:"库存",type:"bar",stack:"总量",label:{normal:{show:!0,position:"insideRight"}},data:this.storeData.numberData},{name:"当前库存总价",type:"bar",stack:"总量",label:{normal:{show:!0,position:"insideRight"}},data:this.storeData.priceData}]};this.chartColumn.setOption(e)},drawCharts:function(){this.drawColumnChart()}},mounted:function(){this.getStoreData()},updated:function(){this.getStoreData()}}},462:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{}}}},463:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(114),a=n(i),o=r(49),s=(n(o),r(29));t.default={data:function(){return{departments:[],pagination:{total:0,currentPage:1,pageSizes:[10,20,50,100],pageSize:10},listLoading:!1,sels:[],departmentUsers:[],editFormVisible:!1,editLoading:!1,editFormRules:{name:[{required:!0,message:"请输入部门名称"}],description:[{required:!0,message:"请输入部门职能"}]},editForm:{description:"",name:"",responsorId:"",responsorName:""},addFormVisible:!1,addLoading:!1,addForm:{description:"",name:""}}},methods:{handleCurrentChange:function(e){this.pagination.currentPage=e,this.getDepartments()},handleSizeChange:function(e){this.pagination.pageSize=e,this.getDepartments()},getDepartments:function(){var e=this;this.listLoading=!0,s.requestApi.department.findAll(this,this.pagination.currentPage-1,this.pagination.pageSize).then(function(t){e.listLoading=!1,t=t.body,t.code===s.Enum.SUCCESS.code&&(e.pagination.total=t.data.totalElements,e.departments=t.data.content)},function(t){s.msgUtils.error(e,s.Enum.SYSTEM_ERROR.msg)})},handleDel:function(e,t){var r=this;this.$confirm("确认删除该记录吗?","提示",{type:"warning"}).then(function(){r.listLoading=!0;var e={id:t.id};s.requestApi.department.delete(r,e).then(function(e){r.listLoading=!1,e=e.body,e.code===s.Enum.SUCCESS.code?r.getDepartments():s.msgUtils.warning(r,e.msg)},function(e){r.listLoading=!1,s.msgUtils.error(r,s.Enum.SYSTEM_ERROR.msg)})})},handleEdit:function(e,t){var r=this,n=new FormData;n.append("departmentId",t.id),s.requestApi.user.findByDepartment(this,n).then(function(e){e=e.body,console.log(e),e.code===s.Enum.SUCCESS.code?(r.departmentUsers=e.data,r.editFormVisible=!0):s.msgUtils.warning(r,e.msg)},function(e){s.msgUtils.error(r,s.Enum.SYSTEM_ERROR.msg)}),this.editForm=(0,a.default)({},t),this.editFormVisible=!0},handleAdd:function(){this.addFormVisible=!0,this.addForm={description:"",name:""}},editSubmit:function(){var e=this;this.$refs.editForm.validate(function(t){t&&e.$confirm("确认提交吗？","提示",{}).then(function(){e.editLoading=!0;var t=(0,a.default)({},e.editForm);e.departmentUsers.forEach(function(e){e.name===t.responsorName&&(t.responsorId=e.id)}),s.requestApi.department.update(e,t).then(function(t){e.editLoading=!1,t=t.body,t.code===s.Enum.SUCCESS.code?(e.getDepartments(),e.editFormVisible=!1):s.msgUtils.warning(e,t.msg)},function(t){e.editLoading=!1,s.msgUtils.error(e,s.Enum.SYSTEM_ERROR.msg)})})})},addSubmit:function(){var e=this;this.$refs.addForm.validate(function(t){t&&e.$confirm("确认提交吗？","提示",{}).then(function(){e.addLoading=!0;var t=(0,a.default)({},e.addForm);s.requestApi.department.add(e,t).then(function(t){e.addLoading=!1,t=t.body,t.code===s.Enum.SUCCESS.code?(e.$refs.addForm.resetFields(),e.getDepartments(),e.addFormVisible=!1):s.msgUtils.warning(e,t.msg)},function(t){e.addLoading=!1,s.msgUtils.error(e,s.Enum.SYSTEM_ERROR.msg)})})})},selsChange:function(e){this.sels=e},batchRemove:function(){var e=this,t=[];this.sels.forEach(function(e){var r={};r.id=e.id,t.push(r)}),this.$confirm("确认删除选中记录吗？","提示",{type:"warning"}).then(function(){e.listLoading=!0,s.requestApi.department.deletes(e,t).then(function(t){e.listLoading=!1,t=t.body,t.code===s.Enum.SUCCESS.code?e.getDepartments():s.msgUtils.warning(e,t.msg)},function(t){e.listLoading=!1,s.msgUtils.error(e,s.Enum.SYSTEM_ERROR.msg)})})}},mounted:function(){this.getDepartments()}}},464:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(49),i=(function(e){e&&e.__esModule}(n),r(29));t.default={data:function(){return{fileList:[],uploadTo:i.requestApi.config.uploadExcels()}},methods:{submitUpload:function(){this.$refs.upload.submit()},upload:function(e){var t=new FormData;t.append("file",e.file),this.$http.post(i.requestApi.config.uploadExcels(),t,{credentials:!0,crossOrigin:!0,headers:{"Content-Type":"multipart/form-data;boundary=###############"}}).then(function(){console.log("回调成功")},function(){console.log("回调失败")})},onError:function(e,t,r){i.msgUtils.error(this,i.Enum.UPLOAD_ERR)},beforeUpload:function(e){var t="xls"===e.name.split(".")[1],r="xlsx"===e.name.split(".")[1],n=e.size/1024/1024<100;return t||r||i.msgUtils.error(this,i.Enum.UPLOAD_FORMAT_ERR),n||i.msgUtils.error(this,i.Enum.UPLOAD_SIZE_ERR),t||r&&n},handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){this.fileList.push({name:"随便",url:""}),console.log(e)}}}},465:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(173),i=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default={data:function(){return{formRule:{name:{type:"input",label:"活动名称",placeholder:"请输入活动名称"},region:{type:"select",label:"活动区域",placeholder:"请选择活动区域",options:[{label:"区域一",value:"shanghai"},{label:"区域二",value:"beijing"},{label:"区域三",value:"吃屎"}]},delivery:{type:"switch",label:"及时配送"},date:{type:"date",label:"活动时间"},type:{type:"checkbox",label:"活动性质",options:[{label:"美食/餐厅线上活动",value:1},{label:"地推活动",value:2},{label:"线下主题活动",value:3,disabled:!0},{label:"单纯品牌曝光",value:4}]},resource:{type:"radio",label:"特殊资源",options:[{label:"线上品牌商赞助",value:"0"},{label:"线下场地免费",value:"1"}]}},data:{name:"",region:"",date:"",delivery:!1,type:[],resource:"0",desc:""},rules:{name:[{required:!0,message:"请输入活动名称",trigger:"blur"},{min:3,max:5,message:"长度在 3 到 5 个字符",trigger:"blur"}],region:[{required:!0,message:"请选择活动区域",trigger:"change"}],date1:[{type:"date",required:!0,message:"请选择日期",trigger:"change"}],date2:[{type:"date",required:!0,message:"请选择时间",trigger:"change"}],type:[{type:"array",required:!0,message:"请至少选择一个活动性质",trigger:"change"}],resource:[{required:!0,message:"请选择活动资源",trigger:"change"}],desc:[{required:!0,message:"请填写活动形式",trigger:"blur"}]}}},methods:{onSubmit:function(e){console.log(e)}},components:{CustomForm:i.default}}},466:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(114),a=n(i),o=r(49),s=(n(o),r(29));t.default={data:function(){return{addSortFormVisible:!1,addSortLoading:!1,addSortForm:{name:""},filters:{name:"",price_start:"",price_end:""},goodItems:[],pagination:{total:0,currentPage:1,pageSizes:[10,20,50,100],pageSize:10},listLoading:!1,sels:[],sortNames:[],editFormVisible:!1,editLoading:!1,editFormRules:{name:[{required:!0,message:"请输入物品名称",trigger:"blur"}],sort:[{required:!0,message:"请输入物品种类",trigger:"change"}],spec:[{required:!0,message:"请输入物品规格",trigger:"blur"}],unit:[{required:!0,message:"请输入物品单位",trigger:"blur"}]},numberRules:[{required:!0,message:"请输入数量"},{type:"integer",min:0,message:"请输入大于0的整数"}],priceRules:[{required:!0,message:"请输入单价"},{type:"number",min:0,message:"请输入大于0的数字"}],searchPrice:[{type:"number",min:0,message:"请输入大于0的数字"}],editForm:{name:"",sort:"",spec:"",unit:"",number:0,price:0},addFormVisible:!1,addLoading:!1,addForm:{name:"",sort:"",spec:"",unit:"",number:0,price:0}}},methods:{handleAddSorts:function(){this.addSortFormVisible=!0},addFormSubmit:function(){var e=this;this.addSortLoading=!0,s.requestApi.good.addSort(this,this.addSortForm).then(function(t){e.addSortLoading=!1,e.addSortFormVisible=!1,t=t.body,t.code===s.Enum.SUCCESS.code?e.getGoodItems():s.msgUtils.warning(e,t.msg)},function(t){e.addSortLoading=!1,e.addSortFormVisible=!1,s.msgUtils.error(e,s.Enum.SYSTEM_ERROR.msg)})},handleCurrentChange:function(e){this.pagination.currentPage=e,this.getGoodItems()},handleSizeChange:function(e){this.pagination.pageSize=e,this.getGoodItems()},getGoodItems:function(){var e=this;s.requestApi.good.findAllSorts(this).then(function(t){t=t.body,t.code===s.Enum.SUCCESS.code?e.sortNames=t.data:s.msgUtils.warning(e,s.Enum.GET_SORTS_FAIL.msg)},function(t){s.msgUtils.error(e,s.Enum.SYSTEM_ERROR.msg)}),this.listLoading=!0;var t=new FormData;t.append("page",this.pagination.currentPage),t.append("size",this.pagination.pageSize),t.append("price_start",this.filters.price_start),t.append("price_end",this.filters.price_end),t.append("name",this.filters.name),s.requestApi.good.findByParam(this,t).then(function(t){e.listLoading=!1,t=t.body,t.code===s.Enum.SUCCESS.code&&(e.pagination.total=t.data.total,e.goodItems=t.data.data)},function(t){s.msgUtils.error(e,s.Enum.SYSTEM_ERROR.msg)})},handleDel:function(e,t){var r=this;this.$confirm("确认删除该记录吗?","提示",{type:"warning"}).then(function(){r.listLoading=!0;var e={id:t.id};s.requestApi.good.delete(r,e).then(function(e){r.listLoading=!1,e=e.body,e.code===s.Enum.SUCCESS.code?r.getGoodItems():s.msgUtils.warning(r,e.msg)},function(e){r.listLoading=!1,s.msgUtils.error(r,s.Enum.SYSTEM_ERROR.msg)})})},handleEdit:function(e,t){this.editFormVisible=!0,this.editForm=(0,a.default)({},t)},handleAdd:function(){this.addFormVisible=!0,this.addForm={name:"",sort:"",spec:"",unit:"",number:0,price:0}},editSubmit:function(){var e=this;this.$refs.editForm.validate(function(t){t&&e.$confirm("确认提交吗？","提示",{}).then(function(){e.editLoading=!0;var t=(0,a.default)({},e.editForm);s.requestApi.good.update(e,t).then(function(t){e.editLoading=!1,t=t.body,t.code===s.Enum.SUCCESS.code?(e.getGoodItems(),e.editFormVisible=!1):s.msgUtils.warning(e,t.msg)},function(t){e.editLoading=!1,s.msgUtils.error(e,s.Enum.SYSTEM_ERROR.msg)})})})},addSubmit:function(){var e=this;this.$refs.addForm.validate(function(t){t&&e.$confirm("确认提交吗？","提示",{}).then(function(){e.addLoading=!0;var t=(0,a.default)({},e.addForm);s.requestApi.good.add(e,t).then(function(t){e.addLoading=!1,t=t.body,t.code===s.Enum.SUCCESS.code?(e.$refs.addForm.resetFields(),e.getGoodItems(),e.addFormVisible=!1):s.msgUtils.warning(e,t.msg)},function(t){e.addLoading=!1,s.msgUtils.error(e,s.Enum.SYSTEM_ERROR.msg)})})})},selsChange:function(e){this.sels=e},batchRemove:function(){var e=this,t=[];this.sels.forEach(function(e){var r={};r.id=e.id,t.push(r)}),this.$confirm("确认删除选中记录吗？","提示",{type:"warning"}).then(function(){e.listLoading=!0,s.requestApi.good.deletes(e,t).then(function(t){e.listLoading=!1,t=t.body,t.code===s.Enum.SUCCESS.code?e.getGoodItems():s.msgUtils.warning(e,t.msg)},function(t){e.listLoading=!1,s.msgUtils.error(e,s.Enum.SYSTEM_ERROR.msg)})})}},mounted:function(){this.getGoodItems()}}},467:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(114),a=n(i),o=r(49),s=(n(o),r(29));t.default={data:function(){return{permissions:[],pagination:{total:0,currentPage:1,pageSizes:[10,20,50,100],pageSize:10},listLoading:!1,sels:[],editFormVisible:!1,editLoading:!1,editFormRules:{name:[{required:!0,message:"请输入权限名称"}],description:[{required:!0,message:"请输入权限描述"}]},editForm:{description:"",name:""},addFormVisible:!1,addLoading:!1,addForm:{description:"",name:""}}},methods:{handleCurrentChange:function(e){this.pagination.currentPage=e,this.getPermissions()},handleSizeChange:function(e){this.pagination.pageSize=e,this.getPermissions()},getPermissions:function(){var e=this;this.listLoading=!0,s.requestApi.permission.findAll(this,this.pagination.currentPage-1,this.pagination.pageSize).then(function(t){e.listLoading=!1,t=t.body,t.code===s.Enum.SUCCESS.code&&(e.pagination.total=t.data.totalElements,e.permissions=t.data.content)},function(t){s.msgUtils.error(e,s.Enum.SYSTEM_ERROR.msg)})},handleDel:function(e,t){var r=this;this.$confirm("确认删除该记录吗?","提示",{type:"warning"}).then(function(){r.listLoading=!0;var e={id:t.id};s.requestApi.permission.delete(r,e).then(function(e){r.listLoading=!1,e=e.body,e.code===s.Enum.SUCCESS.code?r.getPermissions():s.msgUtils.warning(r,e.msg)},function(e){r.listLoading=!1,s.msgUtils.error(r,s.Enum.SYSTEM_ERROR.msg)})})},handleEdit:function(e,t){this.editForm=(0,a.default)({},t),this.editFormVisible=!0},handleAdd:function(){this.addFormVisible=!0,this.addForm={description:"",name:""}},editSubmit:function(){var e=this;this.$refs.editForm.validate(function(t){t&&e.$confirm("确认提交吗？","提示",{}).then(function(){e.editLoading=!0;var t=(0,a.default)({},e.editForm);s.requestApi.permission.update(e,t).then(function(t){e.editLoading=!1,t=t.body,t.code===s.Enum.SUCCESS.code?(e.getPermissions(),e.editFormVisible=!1):s.msgUtils.warning(e,t.msg)},function(t){e.editLoading=!1,s.msgUtils.error(e,s.Enum.SYSTEM_ERROR.msg)})})})},addSubmit:function(){var e=this;this.$refs.addForm.validate(function(t){t&&e.$confirm("确认提交吗？","提示",{}).then(function(){e.addLoading=!0;var t=(0,a.default)({},e.addForm);s.requestApi.permission.add(e,t).then(function(t){e.addLoading=!1,t=t.body,t.code===s.Enum.SUCCESS.code?(e.$refs.addForm.resetFields(),e.getPermissions(),e.addFormVisible=!1):s.msgUtils.warning(e,t.msg)},function(t){e.addLoading=!1,s.msgUtils.error(e,s.Enum.SYSTEM_ERROR.msg)})})})},selsChange:function(e){this.sels=e},batchRemove:function(){var e=this,t=[];this.sels.forEach(function(e){var r={};r.id=e.id,t.push(r)}),this.$confirm("确认删除选中记录吗？","提示",{type:"warning"}).then(function(){e.listLoading=!0,s.requestApi.permission.deletes(e,t).then(function(t){e.listLoading=!1,t=t.body,t.code===s.Enum.SUCCESS.code?e.getPermissions():s.msgUtils.warning(e,t.msg)},function(t){e.listLoading=!1,s.msgUtils.error(e,s.Enum.SYSTEM_ERROR.msg)})})}},mounted:function(){this.getPermissions()}}},468:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(114),a=n(i),o=r(49),s=(n(o),r(29));t.default={data:function(){return{filters:{name:""},users:[],allPermissions:[],pagination:{total:0,currentPage:1,pageSizes:[10,20,50,100],pageSize:10},listLoading:!1,sels:[],departments:[],pemissAddFormVisible:!1,pemissAddLoading:!1,pemissAddForm:{permissionName:"",permisssionId:"",userId:""},permissAddFormRules:{permissionName:[{required:!0,message:"请选择权限",trigger:"change"}]},editFormVisible:!1,editLoading:!1,editFormRules:{name:[{required:!0,message:"请输入用户名称"}],description:[{required:!0,message:"请输入用户描述"}],phoneNumber:[{required:!0,message:"请输入用户手机号码"}],qqNumber:[{type:"integer",message:"请输入正确的格式"}],mailbox:[{type:"email",message:"请输入正确的格式"}]},editForm:{departmentName:"",departmentId:"",description:"",id:"",mailbox:"",name:"",phoneNumber:"",qqNumber:"",weixin:""},addFormVisible:!1,addLoading:!1,addForm:{departmentName:"",departmentId:"",description:"",id:"",mailbox:"",name:"",phoneNumber:"",qqNumber:"",weixin:""}}},methods:{handleAddPermiss:function(e,t){this.pemissAddFormVisible=!0,this.pemissAddForm={permissionName:"",permisssionId:"",userId:t.id}},addPermissSubmit:function(){var e=this;this.pemissAddLoading=!0,this.$refs.pemissAddForm.validate(function(t){if(t){var r=[],n=(0,a.default)({},e.pemissAddForm);e.allPermissions.forEach(function(e){e.name===n.permissionName&&(n.permissionId=e.id)}),r.push({permissionId:n.permissionId,userId:n.userId}),s.requestApi.user.addPermissions(e,r).then(function(t){t=t.body,e.pemissAddLoading=!1,t.code===s.Enum.SUCCESS.code?(e.pemissAddFormVisible=!1,e.getUsers()):(e.pemissAddFormVisible=!1,s.msgUtils.warning(e,t.msg))},function(t){e.pemissAddLoading=!1,e.pemissAddFormVisible=!1,s.msgUtils.error(e,s.Enum.SYSTEM_ERROR.msg)})}})},handleClose:function(e,t){var r=this;return this.$confirm("确认移除此用户的 "+t.name+" 权限吗?","提示",{type:"warning"}).then(function(){r.listLoading=!0;var n=[];n.push({permissionId:t.id,userId:e}),s.requestApi.user.removePermissions(r,n).then(function(e){e=e.body,r.listLoading=!1,e.code===s.Enum.SUCCESS.code?r.getUsers():s.msgUtils.warning(r,e.msg)},function(e){r.listLoading=!1,s.msgUtils.error(r,s.Enum.SYSTEM_ERROR.msg)})}),null},handleDisabled:function(e,t){var r=!1;return t.forEach(function(t){e.id===t.id&&(r=!0)}),r},handleCurrentChange:function(e){this.pagination.currentPage=e,this.getUsers()},handleSizeChange:function(e){this.pagination.pageSize=e,this.getUsers()},getUsers:function(){var e=this;this.listLoading=!0,s.requestApi.department.findAll(this,0,1e3).then(function(t){t=t.body,t.code===s.Enum.SUCCESS.code?e.departments=t.data.content:s.msgUtils.warning(e,t.msg)},function(t){s.msgUtils.error(e,s.Enum.SYSTEM_ERROR.msg)}),s.requestApi.permission.findAll(this,0,1e3).then(function(t){t=t.body,t.code===s.Enum.SUCCESS.code&&(e.allPermissions=t.data.content)},function(t){s.msgUtils.error(e,s.Enum.SYSTEM_ERROR.msg)});var t=new FormData;t.append("page",this.pagination.currentPage),t.append("size",this.pagination.pageSize),t.append("name",this.filters.name),s.requestApi.user.findByParam(this,t).then(function(t){e.listLoading=!1,t=t.body,t.code===s.Enum.SUCCESS.code&&(e.pagination.total=t.data.total,e.users=t.data.data)},function(t){s.msgUtils.error(e,s.Enum.SYSTEM_ERROR.msg)})},handleDel:function(e,t){var r=this;this.$confirm("确认删除该记录吗?","提示",{type:"warning"}).then(function(){r.listLoading=!0;var e={id:t.id};s.requestApi.user.delete(r,e).then(function(e){r.listLoading=!1,e=e.body,e.code===s.Enum.SUCCESS.code?r.getUsers():s.msgUtils.warning(r,e.msg)},function(e){r.listLoading=!1,s.msgUtils.error(r,s.Enum.SYSTEM_ERROR.msg)})})},handleEdit:function(e,t){this.editFormVisible=!0,this.editForm=(0,a.default)({},t)},handleAdd:function(){this.addFormVisible=!0,this.addForm={departmentName:"",departmentId:"",description:"",id:"",mailbox:"",name:"",phoneNumber:"",qqNumber:"",weixin:""}},editSubmit:function(){var e=this;this.$refs.editForm.validate(function(t){t&&e.$confirm("确认提交吗？","提示",{}).then(function(){e.editLoading=!0;var t=(0,a.default)({},e.editForm);e.departments.forEach(function(e){e.name===t.departmentName&&(t.departmentId=e.id)}),s.requestApi.user.update(e,t).then(function(t){e.editLoading=!1,t=t.body,t.code===s.Enum.SUCCESS.code?(e.getUsers(),e.editFormVisible=!1):s.msgUtils.warning(e,t.msg)},function(t){e.editLoading=!1,s.msgUtils.error(e,s.Enum.SYSTEM_ERROR.msg)})})})},addSubmit:function(){var e=this;this.$refs.addForm.validate(function(t){t&&e.$confirm("确认提交吗？","提示",{}).then(function(){e.addLoading=!0;var t=(0,a.default)({},e.addForm);e.departments.forEach(function(e){e.name===t.departmentName&&(t.departmentId=e.id)}),s.requestApi.user.add(e,t).then(function(t){e.addLoading=!1,t=t.body,t.code===s.Enum.SUCCESS.code?(e.$refs.addForm.resetFields(),e.getUsers(),e.addFormVisible=!1):s.msgUtils.warning(e,t.msg)},function(t){e.addLoading=!1,e.addFormVisible=!1,s.msgUtils.error(e,s.Enum.SYSTEM_ERROR.msg)})})})},selsChange:function(e){this.sels=e},batchRemove:function(){var e=this,t=[];this.sels.forEach(function(e){var r={};r.id=e.id,t.push(r)}),this.$confirm("确认删除选中记录吗？","提示",{type:"warning"}).then(function(){e.listLoading=!0,s.requestApi.user.deletes(e,t).then(function(t){e.listLoading=!1,t=t.body,t.code===s.Enum.SUCCESS.code?e.getUsers():s.msgUtils.warning(e,t.msg)},function(t){e.listLoading=!1,s.msgUtils.error(e,s.Enum.SYSTEM_ERROR.msg)})})}},mounted:function(){this.getUsers()}}},469:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(49),a=n(i),o=r(29),s=r(113),l=r(173),d=n(l);t.default={data:function(){var e=this,t=function(e,t,r){if(!t)return r(new Error("请输入单价！"));var n=/^[0-9]+(.[0-9]{1,2})?$/;setTimeout(function(){n.test(t)?r():r("单价格式不正确！")},1e3)},r=function(t,r,n){var i=e.editObj.buyOrderItems,a=/^[0-9]+(.[0-9]{1,2})?$/,o=/^[1-9]\d*$/,s=!0;i.forEach(function(t){for(var r in t)"price"===r&&(a.test(t[r])||(e.err_msg="单价格式不正确，至多保留两位以内小数！",s=!1)),"number"===r&&(o.test(t[r])||(e.err_msg="请在数量一列中输入整数！",s=!1)),""===t[r]&&(e.err_msg="物品明细数据不能为空！",s=!1)}),s&&(e.err_msg=""),n()};return{state2:"",visible2:!1,listLoading:!1,allDepartments:[],allUsers:[],buyOrders:[],dataMap:[],rowIndex1:0,approvalLoading:!1,sels:[],batchApprovalLoading:!1,pagination:{total:0,currentPage:1,pageSizes:[10,20,50,100],pageSize:10},selectRowLoading:!1,allLikeNames:[],editObj:{},editRequestors:[],editFormVisible:!1,editLoading:!1,timeOptions:{shortcuts:[{text:"今天",onClick:function(e){e.$emit("pick",new Date)}},{text:"昨天",onClick:function(e){var t=new Date;t.setTime(t.getTime()-864e5),e.$emit("pick",t)}},{text:"一周前",onClick:function(e){var t=new Date;t.setTime(t.getTime()-6048e5),e.$emit("pick",t)}}]},allSorts:[],nameBool:!1,err_msg:"",editFormRules:{departmentId:[{required:!0,message:"请选择部门名称",trigger:"change"}],requestorId:[{required:!0,message:"请选择部门名称",trigger:"change"}],createAdmin:[{required:!0,message:"请输入物品名称",trigger:"blur"}],createTime:[{required:!0,message:"请输入创建时间",trigger:"blur"}],updateAdmin:[{required:!0,message:"请输入更新人",trigger:"blur"}],updateTime:[{required:!0,message:"请输入更新时间",trigger:"blur"}],requestTime:[{required:!0,message:"请输入申请时间",trigger:"blur"}],buyOrderItems:[{required:!0,message:"物品明细不能为空",trigger:"blur"},{validator:r,trigger:"blur"}],price:[{validator:t,trigger:"blur"},{required:!0,message:"请输入数量",trigger:"blur"}],sort:[{required:!0,message:"请输入物品种类",trigger:"change"}],spec:[{required:!0,message:"请输入物品名称",trigger:"blur"}],unit:[{required:!0,message:"请输入物品名称",trigger:"blur"}]},errMsg:!1,errMsg1:!1,filterVisible:!1,filterRequestors:[],filters:{price_start:"",price_end:"",requestorId:"",departmentId:"",requestTime_start:"",requestTime_end:""},filterRules:{price_start:[{type:"number",min:0,message:"要求大于等于0的数字",trigger:"blur"}],price_end:[{type:"number",min:0,message:"要求大于等于0的数字",trigger:"blur"}],requestTime_start:[{type:"date",message:"日期格式错误",trigger:"change"}],requestTime_end:[{type:"date",message:"日期格式错误",trigger:"change"}]},addFormVisible:!1,addLoading:!1,canAdd:!0,addObj:{departmentId:"",requestTime:"",requestorId:"",description:"",buyOrderItems:[]},addRequestors:[],addFormRules:{departmentId:[{required:!0,message:"请选择部门名称",trigger:"change"}],requestorId:[{required:!0,message:"请选择部门名称",trigger:"change"}],requestTime:[{required:!0,message:"请输入申请时间",trigger:"blur"}]}}},components:{CustomForm:d.default},methods:{sortAll:function(e){var t=e.prop;"creatorName"===t&&(t="createBy"),"updatorName"===t&&(t="lastmodifiedBy"),t=t.replace("Name","Id"),this.filters.property=t,"ascending"===e.order&&(this.filters.direction="ASC"),"descending"===e.order&&(this.filters.direction="DESC"),this.getBuyOrders()},formatInputFlag:function(e,t){return 1===e.hasBeenInput?"是":"否"},onFilterClose:function(){this.getBuyOrders()},refreshData:function(){this.getBuyOrders(),this.filterVisible=!1},handleResetFilter:function(){this.filters={price_start:"",price_end:"",requestorId:"",departmentId:"",requestTime_start:"",requestTime_end:""}},handleFilterAdd:function(){this.filterVisible=!0},selectFilterDepartment:function(e){var t=this,r=new FormData;r.append("departmentId",e),o.requestApi.user.findByDepartment(this,r).then(function(e){e=e.body,e.code===o.Enum.SUCCESS.code?t.filterRequestors=e.data:o.msgUtils.warning(t,e.msg)},function(e){o.msgUtils.error(t,o.Enum.SYSTEM_ERROR.msg)})},checkAddBuyOrderItems:function(){var e=this,t=this.addObj.buyOrderItems,r=/^[0-9]+(.[0-9]{1,2})?$/,n=/^\d+$/;if(this.canAdd=!0,0===t.length)return this.canAdd=!1,void o.msgUtils.warning(this,"明细不能为空");t.forEach(function(t){if(""===t.name)return o.msgUtils.warning(e,"请先选择物品名称"),void(e.canAdd=!1);if(!r.test(t.price))return o.msgUtils.warning(e,"有个单价格式不正确，至多保留两位以内小数！"),void(e.canAdd=!1);if(!n.test(t.number))return o.msgUtils.warning(e,"请在数量一列中输入整数！"),void(e.canAdd=!1);for(var i in t)if(""===t[i])return o.msgUtils.warning(e,"物品明细数据不能留空！"),void(e.canAdd=!1)})},getSummaries:function(e){var t=e.columns,r=e.data,n=[];return t.forEach(function(e,t){if(0===t)return void(n[t]="汇总");if("number"===e.property){var i=0;r.forEach(function(t){i+=Number(t[e.property])}),n[t]="总数量为: "+i}else if("price"===e.property){var a=0;r.forEach(function(t){a+=Number(t.number)*Number(t[e.property])}),n[t]="申请总价为: "+a.toFixed(2)+" 元"}else n[t]=""}),n},handleSelect:function(e,t){e.goodId=t.id,e.name=t.name,e.sort=t.sort,e.spec=t.spec,e.unit=t.unit,e.price=t.price},querySearchAsync:function(e,t){var r=this;""!==e&&(this.loading=!0,o.requestApi.good.findByName(this,e).then(function(e){if(e=e.body,e.code===o.Enum.SUCCESS.code){var n=e.data;n.forEach(function(e){e.value=e.name+"("+e.spec+")"}),t(n)}else o.msgUtils.warning(r,e.msg)},function(e){o.msgUtils.error(r,o.Enum.SYSTEM_ERROR.msg)}))},handleCurrentChange:function(e){this.pagination.currentPage=e,this.getBuyOrders()},handleSizeChange:function(e){this.pagination.pageSize=e,this.getBuyOrders()},getBuyOrders:function(){var e=this;this.listLoading=!0,o.requestApi.department.findAll(this,0,1e3).then(function(t){t=t.body,t.code===o.Enum.SUCCESS.code?e.allDepartments=t.data.content:o.msgUtils.warning(e,t.msg)},function(t){o.msgUtils.error(e,o.Enum.SYSTEM_ERROR.msg)}),o.requestApi.good.findAllSorts(this).then(function(t){t=t.body,t.code===o.Enum.SUCCESS.code?e.allSorts=t.data:o.msgUtils.warning(e,o.Enum.GET_SORTS_FAIL.msg)},function(t){o.msgUtils.error(e,o.Enum.SYSTEM_ERROR.msg)});var t=new FormData;t.append("page",this.pagination.currentPage),t.append("size",this.pagination.pageSize),t.append("price_start",this.filters.price_start),t.append("price_end",this.filters.price_end),t.append("departmentId",this.filters.departmentId),t.append("requestorId",this.filters.requestorId),t.append("requestTime_start",this.filters.requestTime_start),t.append("requestTime_end",this.filters.requestTime_end),this.filters.property&&this.filters.direction&&(t.append("property",this.filters.property),t.append("direction",this.filters.direction)),o.requestApi.buyOrder.findByParam(this,t).then(function(t){if(e.listLoading=!1,t=t.body,t.code===o.Enum.SUCCESS.code){e.pagination.total=t.data.total;var r=(0,s.getNewDataAndMap)("buyOrderItems",t.data.data);e.buyOrders=r.data,e.dataMap=r.map}},function(t){o.msgUtils.error(e,o.Enum.SYSTEM_ERROR.msg)})},clearValidate:function(e){this.$refs[e].clearValidate(),this.canAdd=!1,this.addRequestors=[]},arraySpanMethod:function(e){var t=(e.row,e.column,e.rowIndex),r=e.columnIndex,n=this.dataMap;if(r<2||r>7)return null!=n[t]?{rowspan:n[t],colspan:1}:{rowspan:0,colspan:0}},handleAdd:function(){this.addFormVisible=!0,a.default.emptyObj(this.addObj)},selectAddDepartment:function(e){var t=this;this.addRequestors=[];var r=new FormData;r.append("departmentId",e),o.requestApi.user.findByDepartment(this,r).then(function(e){e=e.body,e.code===o.Enum.SUCCESS.code?t.addRequestors=e.data:o.msgUtils.warning(t,e.msg)},function(e){o.msgUtils.error(t,o.Enum.SYSTEM_ERROR.msg)})},handleRemoveBuyOrderItem:function(e,t){t.splice(e,1)},handleAddBuyOrderItem:function(e){var t={name:"",sort:"",spec:"",unit:"",number:"",price:""};e.push(t)},handleAddFormSubmit:function(e){var t=this;this.$refs[e].validate(function(e){return!!e&&(t.checkAddBuyOrderItems(),!!t.canAdd&&void t.$confirm("确认提交吗？","提示",{}).then(function(){t.addLoading=!0;var e=t.addObj;o.requestApi.buyOrder.add(t,e).then(function(e){e=e.body,t.addFormVisible=!1,t.addLoading=!1,e.code===o.Enum.SUCCESS.code?t.getBuyOrders():o.msgUtils.warning(e.msg)},function(e){t.addFormVisible=!1,t.addLoading=!1,o.msgUtils.error(o.Enum.SYSTEM_ERROR.msg)})}))})},quickInput:function(){var e=this,t=[],r=!0;if(this.sels.forEach(function(e){1!==e.approvalResult?r=!1:t.push(e.id)}),!r)return o.msgUtils.warning(this,"有部分或全部采购单未审核通过，请选择审核通过的采购单！"),!1;this.$confirm("确认入库吗？","提示",{type:"warning"}).then(function(){e.listLoading=!0,o.requestApi.buyOrder.quickInput(e,t).then(function(t){e.listLoading=!1,t=t.body,t.code===o.Enum.SUCCESS.code?(o.msgUtils.success(e,"入库成功！"),e.getBuyOrders()):o.msgUtils.warning(t.msg)},function(t){e.listLoading=!1,o.msgUtils.error(e,o.Enum.SYSTEM_ERROR.msg)})})},showPopover:function(e){return 2!==e},approve:function(e,t){var r=this,n={id:e,approvalResult:t},i=[];i.push(n),this.$confirm("确认提交吗？","提示",{}).then(function(){r.listLoading=!0,o.requestApi.buyOrder.approve(r,i).then(function(e){r.listLoading=!1,e=e.body,e.code===o.Enum.SUCCESS.code?r.getBuyOrders():o.msgUtils.warning(r,e.msg)},function(e){r.listLoading=!1,o.msgUtils.error(r,o.Enum.SYSTEM_ERROR.msg)})})},checkInApproval:function(e){return 2!==e},selsChange:function(e){this.sels=e},batchApprove:function(e){var t=this,r=[],n=!0;if(this.sels.forEach(function(t){if(2===t.approvalResult){var i={id:t.id,approvalResult:e};r.push(i)}else n=!1}),!1===n)return o.msgUtils.warning(this,"存在已审核的纪录！"),!1;var i="";i=1===e?"确认审核通过？":"确认审核不通过？",this.$confirm(i,"提示",{type:"warning"}).then(function(){t.listLoading=!0,o.requestApi.buyOrder.approve(t,r).then(function(e){t.listLoading=!1,e=e.body,e.code===o.Enum.SUCCESS.code?t.getBuyOrders():o.msgUtils.warning(t,e.msg)},function(e){t.listLoading=!1,o.msgUtils.error(t,o.Enum.SYSTEM_ERROR.msg)})})},batchRemove:function(){var e=this,t=this.sels.map(function(e){return{id:e.id}});this.$confirm("确认删除该记录吗?","提示",{type:"warning"}).then(function(){e.listLoading=!0,o.requestApi.buyOrder.deletes(e,t).then(function(t){e.listLoading=!1,t=t.body,t.code===o.Enum.SUCCESS.code?e.getBuyOrders():o.msgUtils.warning(e,t.msg)},function(t){e.listLoading=!1,o.msgUtils.error(e,o.Enum.SYSTEM_ERROR.msg)})})},handleEdit:function(e,t){var r=this;this.listLoading=!0,this.editRequestors=[];var n=new FormData;n.append("departmentId",t.departmentId),o.requestApi.user.findByDepartment(this,n).then(function(e){e=e.body,e.code===o.Enum.SUCCESS.code?r.editRequestors=e.data:o.msgUtils.warning(r,e.msg)},function(e){o.msgUtils.error(r,o.Enum.SYSTEM_ERROR.msg)});var i=new FormData;i.append("buyOrderId",t.id),o.requestApi.buyOrder.findById(this,i).then(function(e){r.listLoading=!1,e=e.body,r.editObj=e},function(e){r.listLoading=!1,o.msgUtils.error(r,o.Enum.SYSTEM_ERROR.msg)}),this.listLoading=!1,this.editFormVisible=!0},selectEditDepartment:function(e){var t=this;this.editRequestors=[];var r=new FormData;r.append("departmentId",e),o.requestApi.user.findByDepartment(this,r).then(function(e){e=e.body,e.code===o.Enum.SUCCESS.code?t.addRequestors=e.data:o.msgUtils.warning(t,e.msg)},function(e){o.msgUtils.error(t,o.Enum.SYSTEM_ERROR.msg)})},handleEditFormSubmit:function(e){var t=this;this.$refs[e].validate(function(e){return!!e&&(t.checkAddBuyOrderItems(),!!t.canAdd&&void t.$confirm("确认提交吗？","提示",{}).then(function(){t.editLoading=!0;var e=t.editObj;o.requestApi.buyOrder.update(t,e).then(function(e){e=e.body,t.editFormVisible=!1,t.editLoading=!1,e.code===o.Enum.SUCCESS.code?t.getBuyOrders():o.msgUtils.warning(e.msg)},function(e){t.editFormVisible=!1,t.editLoading=!1,o.msgUtils.error(o.Enum.SYSTEM_ERROR.msg)})}))})},handleDel:function(e,t){var r=this;this.$confirm("确认删除该记录吗?","提示",{type:"warning"}).then(function(){r.listLoading=!0;var e={id:t.id};o.requestApi.buyOrder.delete(r,e).then(function(e){r.listLoading=!1,e=e.body,e.code===o.Enum.SUCCESS.code?r.getBuyOrders():o.msgUtils.warning(r,e.msg)},function(e){r.listLoading=!1,o.msgUtils.error(r,o.Enum.SYSTEM_ERROR.msg)})})},filterTag:function(e,t){t.approvalResult},tagChange:function(e){switch(e.row.approvalResult){case 0:return e.row.tag="已驳回","danger";case 1:return e.row.tag="已通过","success";case 2:default:return e.row.tag="审核中","primary"}}},mounted:function(){this.getBuyOrders()}}},470:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(49),i=(function(e){e&&e.__esModule}(n),r(29)),a=r(113);t.default={data:function(){return{filters:{name:"",price_start:"",price_end:""},storeItems:[],pagination:{total:0,currentPage:1,pageSizes:[10,20,50,100],pageSize:10},listLoading:!1,sels:[]}},methods:{selsChange:function(e){this.sels=e},handleCurrentChange:function(e){this.pagination.currentPage=e,this.getStoreItems()},handleSizeChange:function(e){this.pagination.pageSize=e,this.getStoreItems()},getStoreItems:function(){var e=this;this.listLoading=!0;var t=new FormData;t.append("page",this.pagination.currentPage),t.append("size",this.pagination.pageSize),t.append("price_start",this.filters.price_start),t.append("price_end",this.filters.price_end),t.append("name",this.filters.name),i.requestApi.store.findByParam(this,t).then(function(t){e.listLoading=!1,t=t.body,t.code===i.Enum.SUCCESS.code&&(e.pagination.total=t.data.total,e.storeItems=(0,a.getNewData)("goodItem",t.data.data))},function(t){i.msgUtils.error(e,i.Enum.SYSTEM_ERROR.msg)})}},mounted:function(){this.getStoreItems()}}},471:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(49),a=n(i),o=r(29),s=r(113),l=r(173),d=n(l);t.default={data:function(){var e=this,t=function(e,t,r){if(!t)return r(new Error("请输入单价！"));var n=/^[0-9]+(.[0-9]{1,2})?$/;setTimeout(function(){n.test(t)?r():r("单价格式不正确！")},1e3)},r=function(t,r,n){var i=e.editObj.storeOperationItems,a=/^[0-9]+(.[0-9]{1,2})?$/,o=/^[1-9]\d*$/,s=!0;i.forEach(function(t){for(var r in t)"price"===r&&(a.test(t[r])||(e.err_msg="单价格式不正确，至多保留两位以内小数！",s=!1)),"number"===r&&(o.test(t[r])||(e.err_msg="请在数量一列中输入整数！",s=!1)),""===t[r]&&(e.err_msg="物品明细数据不能为空！",s=!1)}),s&&(e.err_msg=""),n()};return{allTypes:[{name:"入库",value:"1"},{name:"出库",value:"2"}],state2:"",visible2:!1,listLoading:!1,allDepartments:[],allUsers:[],buyOrders:[],dataMap:[],rowIndex1:0,approvalLoading:!1,sels:[],batchApprovalLoading:!1,pagination:{total:0,currentPage:1,pageSizes:[10,20,50,100],pageSize:10},selectRowLoading:!1,allLikeNames:[],editObj:{},editRequestors:[],editFormVisible:!1,editLoading:!1,timeOptions:{shortcuts:[{text:"今天",onClick:function(e){e.$emit("pick",new Date)}},{text:"昨天",onClick:function(e){var t=new Date;t.setTime(t.getTime()-864e5),e.$emit("pick",t)}},{text:"一周前",onClick:function(e){var t=new Date;t.setTime(t.getTime()-6048e5),e.$emit("pick",t)}}]},allSorts:[],nameBool:!1,err_msg:"",editFormRules:{departmentId:[{required:!0,message:"请选择部门名称",trigger:"change"}],requestorId:[{required:!0,message:"请选择部门名称",trigger:"change"}],createAdmin:[{required:!0,message:"请输入物品名称",trigger:"blur"}],createTime:[{required:!0,message:"请输入创建时间",trigger:"blur"}],updateAdmin:[{required:!0,message:"请输入更新人",trigger:"blur"}],updateTime:[{required:!0,message:"请输入更新时间",trigger:"blur"}],requestTime:[{required:!0,message:"请输入申请时间",trigger:"blur"}],buyOrderItems:[{required:!0,message:"物品明细不能为空",trigger:"blur"},{validator:r,trigger:"blur"}],price:[{validator:t,trigger:"blur"},{required:!0,message:"请输入数量",trigger:"blur"}],sort:[{required:!0,message:"请输入物品种类",trigger:"change"}],spec:[{required:!0,message:"请输入物品名称",trigger:"blur"}],unit:[{required:!0,message:"请输入物品名称",trigger:"blur"}]},errMsg:!1,errMsg1:!1,filterVisible:!1,filterRequestors:[],filters:{price_start:"",price_end:"",requestorId:"",departmentId:"",requestTime_start:"",requestTime_end:""},filterRules:{price_start:[{type:"number",min:0,message:"要求大于等于0的数字",trigger:"blur"}],price_end:[{type:"number",min:0,message:"要求大于等于0的数字",trigger:"blur"}],requestTime_start:[{type:"date",message:"日期格式错误",trigger:"change"}],requestTime_end:[{type:"date",message:"日期格式错误",trigger:"change"}]},addFormVisible:!1,addLoading:!1,canAdd:!0,addObj:{departmentId:"",requestTime:"",requestorId:"",description:"",storeOperationItems:[]},addRequestors:[],addFormRules:{departmentId:[{required:!0,message:"请选择部门名称",trigger:"change"}],requestorId:[{required:!0,message:"请选择部门名称",trigger:"change"}],requestTime:[{required:!0,message:"请输入申请时间",trigger:"blur"}]}}},components:{CustomForm:d.default},methods:{formatTypeFlag:function(e,t){return 1===e.type?"入库":2===e.type?"出库":"未知"},sortAll:function(e){var t=e.prop;"creatorName"===t&&(t="createBy"),"updatorName"===t&&(t="lastmodifiedBy"),t=t.replace("Name","Id"),this.filters.property=t,"ascending"===e.order&&(this.filters.direction="ASC"),"descending"===e.order&&(this.filters.direction="DESC"),this.getBuyOrders()},onFilterClose:function(){this.getBuyOrders()},refreshData:function(){this.getBuyOrders(),this.filterVisible=!1},handleResetFilter:function(){this.filters={price_start:"",price_end:"",requestorId:"",departmentId:"",requestTime_start:"",requestTime_end:""}},handleFilterAdd:function(){this.filterVisible=!0},selectFilterDepartment:function(e){var t=this,r=new FormData;r.append("departmentId",e),o.requestApi.user.findByDepartment(this,r).then(function(e){e=e.body,e.code===o.Enum.SUCCESS.code?t.filterRequestors=e.data:o.msgUtils.warning(t,e.msg)},function(e){o.msgUtils.error(t,o.Enum.SYSTEM_ERROR.msg)})},checkAddBuyOrderItems:function(){var e=this,t=this.addObj.storeOperationItems,r=/^[0-9]+(.[0-9]{1,2})?$/,n=/^\d+$/;if(this.canAdd=!0,0===t.length)return this.canAdd=!1,void o.msgUtils.warning(this,"明细不能为空");t.forEach(function(t){if(""===t.name)return o.msgUtils.warning(e,"请先选择物品名称"),void(e.canAdd=!1);if(!r.test(t.price))return o.msgUtils.warning(e,"有个单价格式不正确，至多保留两位以内小数！"),void(e.canAdd=!1);if(!n.test(t.number))return o.msgUtils.warning(e,"请在数量一列中输入整数！"),void(e.canAdd=!1);for(var i in t)if(""===t[i])return o.msgUtils.warning(e,"物品明细数据不能留空！"),void(e.canAdd=!1)})},getSummaries:function(e){var t=e.columns,r=e.data,n=[];return t.forEach(function(e,t){if(0===t)return void(n[t]="汇总");if("number"===e.property){var i=0;r.forEach(function(t){i+=Number(t[e.property])}),n[t]="总数量为: "+i}else if("price"===e.property){var a=0;r.forEach(function(t){a+=Number(t.number)*Number(t[e.property])}),n[t]="申请总价为: "+a.toFixed(2)+" 元"}else n[t]=""}),n},handleSelect:function(e,t){e.goodId=t.id,e.name=t.name,e.sort=t.sort,e.spec=t.spec,e.unit=t.unit,e.price=t.price},querySearchAsync:function(e,t){var r=this;""!==e&&(this.loading=!0,o.requestApi.good.findByName(this,e).then(function(e){if(e=e.body,e.code===o.Enum.SUCCESS.code){var n=e.data;n.forEach(function(e){e.value=e.name+"("+e.spec+")"}),t(n)}else o.msgUtils.warning(r,e.msg)},function(e){o.msgUtils.error(r,o.Enum.SYSTEM_ERROR.msg)}))},handleCurrentChange:function(e){this.pagination.currentPage=e,this.getBuyOrders()},handleSizeChange:function(e){this.pagination.pageSize=e,this.getBuyOrders()},getBuyOrders:function(){var e=this;this.listLoading=!0,o.requestApi.department.findAll(this,0,1e3).then(function(t){t=t.body,t.code===o.Enum.SUCCESS.code?e.allDepartments=t.data.content:o.msgUtils.warning(e,t.msg)},function(t){o.msgUtils.error(e,o.Enum.SYSTEM_ERROR.msg)}),o.requestApi.good.findAllSorts(this).then(function(t){t=t.body,t.code===o.Enum.SUCCESS.code?e.allSorts=t.data:o.msgUtils.warning(e,o.Enum.GET_SORTS_FAIL.msg)},function(t){o.msgUtils.error(e,o.Enum.SYSTEM_ERROR.msg)});var t=new FormData;t.append("page",this.pagination.currentPage),t.append("size",this.pagination.pageSize),t.append("price_start",this.filters.price_start),t.append("price_end",this.filters.price_end),t.append("departmentId",this.filters.departmentId),t.append("requestorId",this.filters.requestorId),t.append("requestTime_start",this.filters.requestTime_start),t.append("requestTime_end",this.filters.requestTime_end),this.filters.property&&this.filters.direction&&(t.append("property",this.filters.property),t.append("direction",this.filters.direction)),o.requestApi.storeOperation.findByParam(this,t).then(function(t){if(e.listLoading=!1,t=t.body,t.code===o.Enum.SUCCESS.code){e.pagination.total=t.data.total;var r=(0,s.getNewDataAndMap)("storeOperationItems",t.data.data);e.buyOrders=r.data,e.dataMap=r.map}},function(t){o.msgUtils.error(e,o.Enum.SYSTEM_ERROR.msg)})},clearValidate:function(e){this.$refs[e].clearValidate(),this.canAdd=!1,this.addRequestors=[]},arraySpanMethod:function(e){var t=(e.row,e.column,e.rowIndex),r=e.columnIndex,n=this.dataMap;if(r<2||r>7)return null!=n[t]?{rowspan:n[t],colspan:1}:{rowspan:0,colspan:0}},handleAdd:function(){this.addFormVisible=!0,a.default.emptyObj(this.addObj)},selectAddDepartment:function(e){var t=this;this.addRequestors=[];var r=new FormData;r.append("departmentId",e),o.requestApi.user.findByDepartment(this,r).then(function(e){e=e.body,e.code===o.Enum.SUCCESS.code?t.addRequestors=e.data:o.msgUtils.warning(t,e.msg)},function(e){o.msgUtils.error(t,o.Enum.SYSTEM_ERROR.msg)})},handleRemoveBuyOrderItem:function(e,t){t.splice(e,1)},handleAddBuyOrderItem:function(e){var t={name:"",sort:"",spec:"",unit:"",number:"",price:""};e.push(t)},handleAddFormSubmit:function(e){var t=this;this.$refs[e].validate(function(e){return!!e&&(t.checkAddBuyOrderItems(),!!t.canAdd&&void t.$confirm("确认提交吗？","提示",{}).then(function(){t.addLoading=!0;var e=t.addObj;o.requestApi.storeOperation.add(t,e).then(function(e){e=e.body,t.addFormVisible=!1,t.addLoading=!1,e.code===o.Enum.SUCCESS.code?t.getBuyOrders():o.msgUtils.warning(e.msg)},function(e){t.addFormVisible=!1,t.addLoading=!1,o.msgUtils.error(o.Enum.SYSTEM_ERROR.msg)})}))})},quickInput:function(){var e=this,t=[],r=!0;if(this.sels.forEach(function(e){1!==e.approvalResult?r=!1:t.push(e.id)}),!r)return o.msgUtils.warning(this,"有部分或全部采购单未审核通过，请选择审核通过的采购单！"),!1;this.$confirm("确认入库吗？","提示",{type:"warning"}).then(function(){e.listLoading=!0,o.requestApi.storeOperation.quickInput(e,t).then(function(t){e.listLoading=!1,t=t.body,t.code===o.Enum.SUCCESS.code?(o.msgUtils.success(e,"入库成功！"),e.getBuyOrders()):o.msgUtils.warning(t.msg)},function(t){e.listLoading=!1,o.msgUtils.error(e,o.Enum.SYSTEM_ERROR.msg)})})},showPopover:function(e){return 2!==e},approve:function(e,t){var r=this,n={id:e,approvalResult:t},i=[];i.push(n),this.$confirm("确认提交吗？","提示",{}).then(function(){r.listLoading=!0,o.requestApi.storeOperation.approve(r,i).then(function(e){r.listLoading=!1,e=e.body,e.code===o.Enum.SUCCESS.code?r.getBuyOrders():o.msgUtils.warning(r,e.msg)},function(e){r.listLoading=!1,o.msgUtils.error(r,o.Enum.SYSTEM_ERROR.msg)})})},checkInApproval:function(e){return 2!==e},selsChange:function(e){this.sels=e},batchApprove:function(e){var t=this,r=[],n=!0;if(this.sels.forEach(function(t){if(2===t.approvalResult){var i={id:t.id,approvalResult:e};r.push(i)}else n=!1}),!1===n)return o.msgUtils.warning(this,"存在已审核的纪录！"),!1;var i="";i=1===e?"确认审核通过？":"确认审核不通过？",this.$confirm(i,"提示",{type:"warning"}).then(function(){t.listLoading=!0,o.requestApi.storeOperation.approve(t,r).then(function(e){t.listLoading=!1,e=e.body,e.code===o.Enum.SUCCESS.code?t.getBuyOrders():o.msgUtils.warning(t,e.msg)},function(e){t.listLoading=!1,o.msgUtils.error(t,o.Enum.SYSTEM_ERROR.msg)})})},batchRemove:function(){var e=this,t=this.sels.map(function(e){return{id:e.id}});this.$confirm("确认删除该记录吗?","提示",{type:"warning"}).then(function(){e.listLoading=!0,o.requestApi.storeOperation.deletes(e,t).then(function(t){e.listLoading=!1,t=t.body,t.code===o.Enum.SUCCESS.code?e.getBuyOrders():o.msgUtils.warning(e,t.msg)},function(t){e.listLoading=!1,o.msgUtils.error(e,o.Enum.SYSTEM_ERROR.msg)})})},handleEdit:function(e,t){var r=this;this.listLoading=!0,this.editRequestors=[];var n=new FormData;n.append("departmentId",t.departmentId),o.requestApi.user.findByDepartment(this,n).then(function(e){e=e.body,e.code===o.Enum.SUCCESS.code?r.editRequestors=e.data:o.msgUtils.warning(r,e.msg)},function(e){o.msgUtils.error(r,o.Enum.SYSTEM_ERROR.msg)});var i=new FormData;i.append("buyOrderId",t.id),o.requestApi.storeOperation.findById(this,i).then(function(e){r.listLoading=!1,e=e.body,r.editObj=e},function(e){r.listLoading=!1,o.msgUtils.error(r,o.Enum.SYSTEM_ERROR.msg)}),this.listLoading=!1,this.editFormVisible=!0},selectEditDepartment:function(e){var t=this;this.editRequestors=[];var r=new FormData;r.append("departmentId",e),o.requestApi.user.findByDepartment(this,r).then(function(e){e=e.body,e.code===o.Enum.SUCCESS.code?t.addRequestors=e.data:o.msgUtils.warning(t,e.msg)},function(e){o.msgUtils.error(t,o.Enum.SYSTEM_ERROR.msg)})},handleEditFormSubmit:function(e){var t=this;this.$refs[e].validate(function(e){return!!e&&(t.checkAddBuyOrderItems(),!!t.canAdd&&void t.$confirm("确认提交吗？","提示",{}).then(function(){t.editLoading=!0;var e=t.editObj;o.requestApi.storeOperation.update(t,e).then(function(e){e=e.body,t.editFormVisible=!1,t.editLoading=!1,e.code===o.Enum.SUCCESS.code?t.getBuyOrders():o.msgUtils.warning(e.msg)},function(e){t.editFormVisible=!1,t.editLoading=!1,o.msgUtils.error(o.Enum.SYSTEM_ERROR.msg)})}))})},handleDel:function(e,t){var r=this;this.$confirm("确认删除该记录吗?","提示",{type:"warning"}).then(function(){r.listLoading=!0;var e={id:t.id};o.requestApi.storeOperation.delete(r,e).then(function(e){r.listLoading=!1,e=e.body,e.code===o.Enum.SUCCESS.code?r.getBuyOrders():o.msgUtils.warning(r,e.msg)},function(e){r.listLoading=!1,o.msgUtils.error(r,o.Enum.SYSTEM_ERROR.msg)})})},filterTag:function(e,t){t.approvalResult},tagChange:function(e){switch(e.row.approvalResult){case 0:return e.row.tag="已驳回","danger";case 1:return e.row.tag="已通过","success";case 2:default:return e.row.tag="审核中","primary"}}},mounted:function(){this.getBuyOrders()}}},472:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(49),a=n(i),o=r(29),s=r(113),l=r(173),d=n(l);t.default={data:function(){var e=this,t=function(e,t,r){if(!t)return r(new Error("请输入单价！"));var n=/^[0-9]+(.[0-9]{1,2})?$/;setTimeout(function(){n.test(t)?r():r("单价格式不正确！")},1e3)},r=function(t,r,n){var i=e.editObj.takeOrderItems,a=/^[0-9]+(.[0-9]{1,2})?$/,o=/^[1-9]\d*$/,s=!0;i.forEach(function(t){for(var r in t)"price"===r&&(a.test(t[r])||(e.err_msg="单价格式不正确，至多保留两位以内小数！",s=!1)),"number"===r&&(o.test(t[r])||(e.err_msg="请在数量一列中输入整数！",s=!1)),""===t[r]&&(e.err_msg="物品明细数据不能为空！",s=!1)}),s&&(e.err_msg=""),n()};return{state2:"",visible2:!1,listLoading:!1,allDepartments:[],allUsers:[],takeOrders:[],dataMap:[],rowIndex1:0,approvalLoading:!1,sels:[],batchApprovalLoading:!1,pagination:{total:0,currentPage:1,pageSizes:[10,20,50,100],pageSize:10},selectRowLoading:!1,allLikeNames:[],editObj:{},editRequestors:[],editFormVisible:!1,editLoading:!1,timeOptions:{shortcuts:[{text:"今天",onClick:function(e){e.$emit("pick",new Date)}},{text:"昨天",onClick:function(e){var t=new Date;t.setTime(t.getTime()-864e5),e.$emit("pick",t)}},{text:"一周前",onClick:function(e){var t=new Date;t.setTime(t.getTime()-6048e5),e.$emit("pick",t)}}]},allSorts:[],nameBool:!1,err_msg:"",editFormRules:{departmentId:[{required:!0,message:"请选择部门名称",trigger:"change"}],requestorId:[{required:!0,message:"请选择部门名称",trigger:"change"}],createAdmin:[{required:!0,message:"请输入物品名称",trigger:"blur"}],createTime:[{required:!0,message:"请输入创建时间",trigger:"blur"}],updateAdmin:[{required:!0,message:"请输入更新人",trigger:"blur"}],updateTime:[{required:!0,message:"请输入更新时间",trigger:"blur"}],requestTime:[{required:!0,message:"请输入申请时间",trigger:"blur"}],takeOrderItems:[{required:!0,message:"物品明细不能为空",trigger:"blur"},{validator:r,trigger:"blur"}],price:[{validator:t,trigger:"blur"},{required:!0,message:"请输入数量",trigger:"blur"}],sort:[{required:!0,message:"请输入物品种类",trigger:"change"}],spec:[{required:!0,message:"请输入物品名称",trigger:"blur"}],unit:[{required:!0,message:"请输入物品名称",trigger:"blur"}]},errMsg:!1,errMsg1:!1,filterVisible:!1,filterRequestors:[],filters:{price_start:"",price_end:"",requestorId:"",departmentId:"",requestTime_start:"",requestTime_end:""},filterRules:{price_start:[{type:"number",min:0,message:"要求大于等于0的数字",trigger:"blur"}],price_end:[{type:"number",min:0,message:"要求大于等于0的数字",trigger:"blur"}],requestTime_start:[{type:"date",message:"日期格式错误",trigger:"change"}],requestTime_end:[{type:"date",message:"日期格式错误",trigger:"change"}]},addFormVisible:!1,addLoading:!1,canAdd:!0,addObj:{departmentId:"",requestTime:"",requestorId:"",description:"",takeOrderItems:[]},addRequestors:[],addFormRules:{departmentId:[{required:!0,message:"请选择部门名称",trigger:"change"}],requestorId:[{required:!0,message:"请选择部门名称",trigger:"change"}],requestTime:[{required:!0,message:"请输入申请时间",trigger:"blur"}]}}},components:{CustomForm:d.default},methods:{sortAll:function(e){var t=e.prop;"creatorName"===t&&(t="createBy"),"updatorName"===t&&(t="lastmodifiedBy"),t=t.replace("Name","Id"),this.filters.property=t,"ascending"===e.order&&(this.filters.direction="ASC"),"descending"===e.order&&(this.filters.direction="DESC"),this.getTakeOrders()},formatOutputFlag:function(e,t){return 1===e.hasBeenOutput?"是":"否"},onFilterClose:function(){this.getTakeOrders()},refreshData:function(){this.getTakeOrders(),this.filterVisible=!1},handleResetFilter:function(){this.filters={price_start:"",price_end:"",requestorId:"",departmentId:"",requestTime_start:"",requestTime_end:""}},handleFilterAdd:function(){this.filterVisible=!0},selectFilterDepartment:function(e){var t=this,r=new FormData;r.append("departmentId",e),o.requestApi.user.findByDepartment(this,r).then(function(e){e=e.body,e.code===o.Enum.SUCCESS.code?t.filterRequestors=e.data:o.msgUtils.warning(t,e.msg)},function(e){o.msgUtils.error(t,o.Enum.SYSTEM_ERROR.msg)})},checkAddTakeOrderItems:function(){var e=this,t=this.addObj.takeOrderItems,r=/^[0-9]+(.[0-9]{1,2})?$/,n=/^\d+$/;if(this.canAdd=!0,0===t.length)return this.canAdd=!1,void o.msgUtils.warning(this,"明细不能为空");t.forEach(function(t){if(""===t.name)return o.msgUtils.warning(e,"请先选择物品名称"),void(e.canAdd=!1);if(!r.test(t.price))return o.msgUtils.warning(e,"有个单价格式不正确，至多保留两位以内小数！"),void(e.canAdd=!1);if(!n.test(t.number))return o.msgUtils.warning(e,"请在数量一列中输入整数！"),void(e.canAdd=!1);for(var i in t)if(""===t[i])return o.msgUtils.warning(e,"物品明细数据不能留空！"),void(e.canAdd=!1)})},getSummaries:function(e){var t=e.columns,r=e.data,n=[];return t.forEach(function(e,t){if(0===t)return void(n[t]="汇总");if("number"===e.property){var i=0;r.forEach(function(t){i+=Number(t[e.property])}),n[t]="总数量为: "+i}else if("price"===e.property){var a=0;r.forEach(function(t){a+=Number(t.number)*Number(t[e.property])}),n[t]="申请总价为: "+a.toFixed(2)+" 元"}else n[t]=""}),n},handleSelect:function(e,t){e.goodId=t.id,e.name=t.name,e.sort=t.sort,e.spec=t.spec,e.unit=t.unit,e.price=t.price,e.returnNumber=0},querySearchAsync:function(e,t){var r=this;""!==e&&(this.loading=!0,o.requestApi.good.findByName(this,e).then(function(e){if(e=e.body,e.code===o.Enum.SUCCESS.code){var n=e.data;n.forEach(function(e){e.value=e.name+"("+e.spec+")"}),t(n)}else o.msgUtils.warning(r,e.msg)},function(e){o.msgUtils.error(r,o.Enum.SYSTEM_ERROR.msg)}))},handleCurrentChange:function(e){this.pagination.currentPage=e,this.getTakeOrders()},handleSizeChange:function(e){this.pagination.pageSize=e,this.getTakeOrders()},getTakeOrders:function(){var e=this;this.listLoading=!0,o.requestApi.department.findAll(this,0,1e3).then(function(t){t=t.body,t.code===o.Enum.SUCCESS.code?e.allDepartments=t.data.content:o.msgUtils.warning(e,t.msg)},function(t){o.msgUtils.error(e,o.Enum.SYSTEM_ERROR.msg)}),o.requestApi.good.findAllSorts(this).then(function(t){t=t.body,t.code===o.Enum.SUCCESS.code?e.allSorts=t.data:o.msgUtils.warning(e,o.Enum.GET_SORTS_FAIL.msg)},function(t){o.msgUtils.error(e,o.Enum.SYSTEM_ERROR.msg)});var t=new FormData;t.append("page",this.pagination.currentPage),t.append("size",this.pagination.pageSize),t.append("price_start",this.filters.price_start),t.append("price_end",this.filters.price_end),t.append("departmentId",this.filters.departmentId),t.append("requestorId",this.filters.requestorId),t.append("requestTime_start",this.filters.requestTime_start),t.append("requestTime_end",this.filters.requestTime_end),this.filters.property&&this.filters.direction&&(t.append("property",this.filters.property),t.append("direction",this.filters.direction)),o.requestApi.takeOrder.findByParam(this,t).then(function(t){if(e.listLoading=!1,t=t.body,t.code===o.Enum.SUCCESS.code){e.pagination.total=t.data.total;var r=(0,s.getNewDataAndMap)("takeOrderItems",t.data.data);e.takeOrders=r.data,e.dataMap=r.map}},function(t){o.msgUtils.error(e,o.Enum.SYSTEM_ERROR.msg)})},clearValidate:function(e){this.$refs[e].clearValidate(),this.canAdd=!1,this.addRequestors=[]},arraySpanMethod:function(e){var t=(e.row,e.column,e.rowIndex),r=e.columnIndex,n=this.dataMap;if(r<2||r>7)return null!=n[t]?{rowspan:n[t],colspan:1}:{rowspan:0,colspan:0}},handleAdd:function(){this.addFormVisible=!0,a.default.emptyObj(this.addObj)},selectAddDepartment:function(e){var t=this;this.addRequestors=[];var r=new FormData;r.append("departmentId",e),o.requestApi.user.findByDepartment(this,r).then(function(e){e=e.body,e.code===o.Enum.SUCCESS.code?t.addRequestors=e.data:o.msgUtils.warning(t,e.msg)},function(e){o.msgUtils.error(t,o.Enum.SYSTEM_ERROR.msg)})},handleRemoveTakeOrderItem:function(e,t){t.splice(e,1)},handleAddTakeOrderItem:function(e){var t={name:"",sort:"",spec:"",unit:"",number:"",price:""};e.push(t)},handleAddFormSubmit:function(e){var t=this;this.$refs[e].validate(function(e){return!!e&&(t.checkAddTakeOrderItems(),!!t.canAdd&&void t.$confirm("确认提交吗？","提示",{}).then(function(){t.addLoading=!0;var e=t.addObj;o.requestApi.takeOrder.add(t,e).then(function(e){e=e.body,t.addFormVisible=!1,t.addLoading=!1,e.code===o.Enum.SUCCESS.code?t.getTakeOrders():o.msgUtils.warning(t,e.msg)},function(e){t.addFormVisible=!1,t.addLoading=!1,o.msgUtils.error(o.Enum.SYSTEM_ERROR.msg)})}))})},quickOutput:function(){var e=this,t=[],r=!0;if(this.sels.forEach(function(e){1!==e.approvalResult?r=!1:t.push(e.id)}),!r)return o.msgUtils.warning(this,"有部分或全部采购单未审核通过，请选择审核通过的采购单！"),!1;this.$confirm("确认出库吗？","提示",{type:"warning"}).then(function(){e.listLoading=!0,o.requestApi.takeOrder.quickOutput(e,t).then(function(t){e.listLoading=!1,t=t.body,t.code===o.Enum.SUCCESS.code?(o.msgUtils.success(e,"出库成功！"),e.getTakeOrders()):o.msgUtils.warning(e,t.msg)},function(t){e.listLoading=!1,o.msgUtils.error(e,o.Enum.SYSTEM_ERROR.msg)})})},showPopover:function(e){return 2!==e},approve:function(e,t){var r=this,n={id:e,approvalResult:t},i=[];i.push(n),this.$confirm("确认提交吗？","提示",{}).then(function(){r.listLoading=!0,o.requestApi.takeOrder.approve(r,i).then(function(e){r.listLoading=!1,e=e.body,e.code===o.Enum.SUCCESS.code?r.getTakeOrders():o.msgUtils.warning(r,e.msg)},function(e){r.listLoading=!1,o.msgUtils.error(r,o.Enum.SYSTEM_ERROR.msg)})})},checkInApproval:function(e){return 2!==e},selsChange:function(e){this.sels=e},batchApprove:function(e){var t=this,r=[],n=!0;if(this.sels.forEach(function(t){if(2===t.approvalResult){var i={id:t.id,approvalResult:e};r.push(i)}else n=!1}),!1===n)return o.msgUtils.warning(this,"存在已审核的纪录！"),!1;var i="";i=1===e?"确认审核通过？":"确认审核不通过？",this.$confirm(i,"提示",{type:"warning"}).then(function(){t.listLoading=!0,o.requestApi.takeOrder.approve(t,r).then(function(e){t.listLoading=!1,e=e.body,e.code===o.Enum.SUCCESS.code?t.getTakeOrders():o.msgUtils.warning(t,e.msg)},function(e){t.listLoading=!1,o.msgUtils.error(t,o.Enum.SYSTEM_ERROR.msg)})})},batchRemove:function(){var e=this,t=this.sels.map(function(e){return{id:e.id}});this.$confirm("确认删除该记录吗?","提示",{type:"warning"}).then(function(){e.listLoading=!0,o.requestApi.takeOrder.deletes(e,t).then(function(t){e.listLoading=!1,t=t.body,t.code===o.Enum.SUCCESS.code?e.getTakeOrders():o.msgUtils.warning(e,t.msg)},function(t){e.listLoading=!1,o.msgUtils.error(e,o.Enum.SYSTEM_ERROR.msg)})})},handleEdit:function(e,t){var r=this;this.listLoading=!0,this.editRequestors=[];var n=new FormData;n.append("departmentId",t.departmentId),o.requestApi.user.findByDepartment(this,n).then(function(e){e=e.body,e.code===o.Enum.SUCCESS.code?r.editRequestors=e.data:o.msgUtils.warning(r,e.msg)},function(e){o.msgUtils.error(r,o.Enum.SYSTEM_ERROR.msg)});var i=new FormData;i.append("takeOrderId",t.id),o.requestApi.takeOrder.findById(this,i).then(function(e){r.listLoading=!1,e=e.body,r.editObj=e},function(e){r.listLoading=!1,o.msgUtils.error(r,o.Enum.SYSTEM_ERROR.msg)}),this.listLoading=!1,this.editFormVisible=!0},selectEditDepartment:function(e){var t=this;this.editRequestors=[];var r=new FormData;r.append("departmentId",e),o.requestApi.user.findByDepartment(this,r).then(function(e){e=e.body,e.code===o.Enum.SUCCESS.code?t.addRequestors=e.data:o.msgUtils.warning(t,e.msg)},function(e){o.msgUtils.error(t,o.Enum.SYSTEM_ERROR.msg)})},handleEditFormSubmit:function(e){var t=this;this.$refs[e].validate(function(e){return!!e&&(t.checkAddTakeOrderItems(),!!t.canAdd&&void t.$confirm("确认提交吗？","提示",{}).then(function(){t.editLoading=!0;var e=t.editObj;o.requestApi.takeOrder.update(t,e).then(function(e){e=e.body,t.editFormVisible=!1,t.editLoading=!1,e.code===o.Enum.SUCCESS.code?t.getTakeOrders():o.msgUtils.warning(t,e.msg)},function(e){t.editFormVisible=!1,t.editLoading=!1,o.msgUtils.error(o.Enum.SYSTEM_ERROR.msg)})}))})},handleDel:function(e,t){var r=this;this.$confirm("确认删除该记录吗?","提示",{type:"warning"}).then(function(){r.listLoading=!0;var e={id:t.id};o.requestApi.takeOrder.delete(r,e).then(function(e){r.listLoading=!1,e=e.body,e.code===o.Enum.SUCCESS.code?r.getTakeOrders():o.msgUtils.warning(r,e.msg)},function(e){r.listLoading=!1,o.msgUtils.error(r,o.Enum.SYSTEM_ERROR.msg)})})},filterTag:function(e,t){t.approvalResult},tagChange:function(e){switch(e.row.approvalResult){case 0:return e.row.tag="已驳回","danger";case 1:return e.row.tag="已通过","success";case 2:default:return e.row.tag="审核中","primary"}}},mounted:function(){this.getTakeOrders()}}},473:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=r(405),a=(n(i),r(37)),o=n(a),s=r(410),l=n(s),d=r(406),u=n(d);r(407);var c=r(412),m=n(c),p=r(404),f=n(p),g=r(253),b=n(g),h=r(403),v=n(h),_=r(402),y=n(_),S=r(179);n(S);r(408);var w=r(409),E=(n(w),r(411)),O=n(E);r(29);y.default.bootstrap(),o.default.use(u.default),o.default.use(m.default),o.default.use(O.default),o.default.use(b.default),o.default.http.interceptors.push(function(e,t){e.credentials=!0,t()});var k=new m.default({routes:v.default});k.beforeEach(function(e,t,r){var n=JSON.parse(sessionStorage.getItem("user"));"/login"==e.path&&(n?r({path:"/adminHome"}):r()),n||"/login"==e.path?r():r({path:"/login"})});o.default.http.interceptors.push(function(e,t){t(function(e){return 11===e.body.code&&(sessionStorage.removeItem("user"),sessionStorage.setItem("not_login","error"),k.push({path:"/login"})),e})}),new o.default({router:k,store:f.default,render:function(e){return e(l.default)}}).$mount("#app")},474:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enterWarehouseRecords=t.Things=t.WarehouseManager=t.Users=t.LoginUsers=void 0;for(var n=r(1019),i=function(e){return e&&e.__esModule?e:{default:e}}(n),a=[{id:1,username:"admin",password:"123456",avatar:"https://raw.githubusercontent.com/taylorchen709/markdown-images/master/vueadmin/user.png",name:"张某某"}],o=[],s=[],l=["铅笔","橡皮擦","刀"],d=[],u=0;u<86;u++)o.push(i.default.mock({id:i.default.Random.guid(),name:i.default.Random.cname(),addr:i.default.mock("@county(true)"),"age|18-60":1,birth:i.default.Random.date(),sex:i.default.Random.integer(0,1)}));for(var c=0;c<10;c++)s.push(i.default.mock({id:i.default.Random.guid(),warehouseManagerName:i.default.Random.cname()}));for(var m=0;m<100;m++)d.push(i.default.mock({id:i.default.Random.guid(),thingName:i.default.Random.cname(),type:i.default.Random.cname(),size:i.default.Random.cname(),unit:i.default.Random.cword(1,1),total:i.default.Random.natural(1,1e4),unitPrice:i.default.Random.float(1,1e6,2,2),totalPrice:i.default.Random.float(1,9007199254740992,2,2),personInCharge:i.default.Random.cname(),enterTime:i.default.Random.date(),updateTime:i.default.Random.date(),submitTime:i.default.Random.date(),submitPerson:i.default.Random.cname()}));t.LoginUsers=a,t.Users=o,t.WarehouseManager=s,t.Things=l,t.enterWarehouseRecords=d},475:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(260),a=n(i),o=r(478),s=n(o),l=r(179),d=n(l),u=r(436),c=n(u),m=r(474),p=m.Users,f=m.WarehouseManager,g=m.Things,b=m.enterWarehouseRecords;t.default={bootstrap:function(){var e=new c.default(d.default);e.onGet("/success").reply(200,{msg:"success"}),e.onGet("/error").reply(500,{msg:"failure"}),e.onPost("/login").reply(function(e){var t=JSON.parse(e.data),r=t.username,n=t.password;return new s.default(function(e,t){var i=null;setTimeout(function(){var t=m.LoginUsers.some(function(e){if(e.username===r&&e.password===n)return i=JSON.parse((0,a.default)(e)),i.password=void 0,!0});e(t?[200,{code:200,msg:"请求成功",user:i}]:[200,{code:500,msg:"账号或密码错误"}])},1e3)})}),e.onGet("/user/list").reply(function(e){var t=e.params.name,r=p.filter(function(e){return!t||-1!=e.name.indexOf(t)});return new s.default(function(e,t){setTimeout(function(){e([200,{users:r}])},1e3)})}),e.onGet("/warehouse/enterWarehouseRecord").reply(function(e){var t=!1,r=e.params;for(var n in r)if(""!==r[n]){t=!0;break}if(t)return new s.default(function(e,t){setTimeout(function(){e([200,{enterWarehouseRecords:b}])},1e3)})}),e.onGet("/warehouse/enterWarehouseRecordListpage").reply(function(e){var t=e.params,r=t.tableId,n=t.currentPage,i=t.pageSize,a=t.queryKey,o=[],l=[{label:"全部",value:"all"},{label:"名称",value:"thingName"},{label:"种类",value:"type"},{label:"规格",value:"size"},{label:"单位",value:"unit"},{label:"数量",value:"total"},{label:"单价",value:"unitPrice"},{label:"总价",value:"totalPrice"},{label:"负责人",value:"personInCharge"},{label:"入库时间",value:"enterTime"},{label:"更新时间",value:"updateTime"},{label:"提交时间",value:"submitTime"},{label:"提交人",value:"submitPerson"}],d=0;if("enterWarehouseRecords"===r&&""!==n&&""!==i)switch(a){case"all":d=b.length,o=b.filter(function(e,t){return t<i*n&&t>=i*(n-1)})}return new s.default(function(e,t){setTimeout(function(){e([200,{enterWarehouseKey:l,total:d,enterWarehouseRecordsList:o}])},1e3)})}),e.onGet("/user/listpage").reply(function(e){var t=e.params,r=t.page,n=t.name,i=p.filter(function(e){return!n||-1!=e.name.indexOf(n)}),a=i.length;return i=i.filter(function(e,t){return t<20*r&&t>=20*(r-1)}),new s.default(function(e,t){setTimeout(function(){e([200,{total:a,users:i}])},1e3)})}),e.onGet("/user/remove").reply(function(e){var t=e.params.id;return p=p.filter(function(e){return e.id!==t}),new s.default(function(e,t){setTimeout(function(){e([200,{code:200,msg:"删除成功"}])},500)})}),e.onGet("/user/batchremove").reply(function(e){var t=e.params.ids;return t=t.split(","),p=p.filter(function(e){return!t.includes(e.id)}),new s.default(function(e,t){setTimeout(function(){e([200,{code:200,msg:"删除成功"}])},500)})}),e.onGet("/user/edit").reply(function(e){var t=e.params,r=t.id,n=t.name,i=t.addr,a=t.age,o=t.birth,l=t.sex;return p.some(function(e){if(e.id===r)return e.name=n,e.addr=i,e.age=a,e.birth=o,e.sex=l,!0}),new s.default(function(e,t){setTimeout(function(){e([200,{code:200,msg:"编辑成功"}])},500)})}),e.onGet("/user/add").reply(function(e){var t=e.params,r=t.name,n=t.addr,i=t.age,a=t.birth,o=t.sex;return p.push({name:r,addr:n,age:i,birth:a,sex:o}),new s.default(function(e,t){setTimeout(function(){e([200,{code:200,msg:"新增成功"}])},500)})}),e.onGet("/warehouseManager/list").reply(function(){return new s.default(function(e,t){setTimeout(function(){e([200,{code:200,warehouseManager:f}])},1e3)})}),e.onGet("/warehouse/things").reply(function(){return new s.default(function(e,t){setTimeout(function(){e([200,{code:200,things:g}])},1e3)})})}}},476:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.increment=function(e){(0,e.commit)("INCREMENT")},t.decrement=function(e){(0,e.commit)("DECREMENT")}},477:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.getCount=function(e){return e.count}},49:function(e,t,r){"use strict";function n(e,t){for(var t=t-(e+"").length,r=0;r<t;r++)e="0"+e;return e}Object.defineProperty(t,"__esModule",{value:!0});var i=/([yMdhsm])(\1*)/g;t.default={getQueryStringByName:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),r=window.location.search.substr(1).match(t),n="";return null!=r&&(n=r[2]),t=null,r=null,null==n||""==n||"undefined"==n?"":n},formatDate:{format:function(e,t){return t=t||"yyyy-MM-dd",t.replace(i,function(t){switch(t.charAt(0)){case"y":return n(e.getFullYear(),t.length);case"M":return n(e.getMonth()+1,t.length);case"d":return n(e.getDate(),t.length);case"w":return e.getDay()+1;case"h":return n(e.getHours(),t.length);case"m":return n(e.getMinutes(),t.length);case"s":return n(e.getSeconds(),t.length)}})},parse:function(e,t){var r=t.match(i),n=e.match(/(\d)+/g);if(r.length==n.length){for(var a=new Date(1970,0,1),o=0;o<r.length;o++){var s=parseInt(n[o]);switch(r[o].charAt(0)){case"y":a.setFullYear(s);break;case"M":a.setMonth(s-1);break;case"d":a.setDate(s);break;case"h":a.setHours(s);break;case"m":a.setMinutes(s);break;case"s":a.setSeconds(s)}}return a}return null}},emptyObj:function(e){for(var t in e)Array.isArray(e[t])?e[t]=[]:e[t]=""}}}},[473]);
//# sourceMappingURL=app.43e7555943fe9519cf2b.js.map